[2025-09-30 01:43:32] $ uv run enreach export update
[2025-09-30 01:43:35] INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
[2025-09-30 01:43:35] INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
[2025-09-30 01:43:35] Using .env: /Users/daniel/Documents/code/enreach-tools/.env
[2025-09-30 01:43:35] INFO  [enreach_tools.cli] CLI command invoked: export update
[2025-09-30 01:43:35] INFO  [enreach_tools.cli] NetBox export command invoked
[2025-09-30 01:43:35] INFO  [enreach_tools.cli] Invoking legacy script netbox-export/bin/netbox_update.py
[2025-09-30 01:43:37] INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
[2025-09-30 01:43:37] INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
[2025-09-30 01:43:37] INFO  [enreach_tools.application.services.netbox] NetBox export started
[2025-09-30 01:43:44] INFO  [enreach_tools.application.services.netbox] Device diff computed
[2025-09-30 01:43:46] INFO  [enreach_tools.application.services.netbox] VM diff computed
[2025-09-30 01:43:46] INFO  [enreach_tools.application.services.netbox] Merging NetBox CSVs
[2025-09-30 01:43:46] INFO  [enreach_tools.application.services.netbox] NetBox CSV merge completed
[2025-09-30 01:43:46] INFO  [enreach_tools.application.services.netbox] Creating Excel export
[2025-09-30 01:43:46] INFO  [enreach_tools.application.services.netbox] Applying column order
[2025-09-30 01:43:48] INFO  [enreach_tools.application.services.netbox] Excel export completed
[2025-09-30 01:43:48] INFO  [enreach_tools.application.services.netbox] NetBox export completed
[2025-09-30 01:43:48] [bold]Running NetBox export service...[/bold]
[2025-09-30 01:43:48] [green]Update complete: devices + vms + merge[/green]
[2025-09-30 01:43:48] INFO  [enreach_tools.cli] Legacy script finished netbox-export/bin/netbox_update.py (rc=0)
[2025-09-30 01:43:48] INFO  [enreach_tools.cli] Legacy NetBox export completed
[2025-09-30 01:43:48] INFO  [enreach_tools.cli] Checking Confluence auto-publish configuration
[2025-09-30 01:43:48] INFO  [enreach_tools.cli] Publishing CMDB export to Confluence
[2025-09-30 01:43:48] INFO  [enreach_tools.cli] Invoking legacy script netbox-export/bin/confluence_publish_cmdb.py
[2025-09-30 01:43:51] INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
[2025-09-30 01:43:51] INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
[2025-09-30 01:43:51] Publishing CMDB to Confluence...
[2025-09-30 01:43:53] INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
[2025-09-30 01:43:53] INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
[2025-09-30 01:43:53] Uploading: /Users/daniel/Documents/code/enreach-tools/data/Systems CMDB.xlsx -> page 981533033 as Systems CMDB.xlsx
[2025-09-30 01:43:54] Attachment exists (id att981434769); uploading new version
[2025-09-30 01:43:55] Attachment upload complete
[2025-09-30 01:43:55] Name: Systems CMDB.xlsx
[2025-09-30 01:43:55] Version: 111
[2025-09-30 01:43:55] Open: https://enreach-services.atlassian.net/wiki/pages/viewpageattachments.action?pageId=981533033&preview=%2F981533033%2F981434769%2FSystems+CMDB.xlsx
[2025-09-30 01:43:56] INFO  [enreach_tools.cli] Legacy script finished netbox-export/bin/confluence_publish_cmdb.py (rc=0)
[2025-09-30 01:43:56] INFO  [enreach_tools.cli] Invoking legacy script netbox-export/bin/confluence_publish_devices_table.py
[2025-09-30 01:43:58] INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
[2025-09-30 01:43:58] INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
[2025-09-30 01:44:02] INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
[2025-09-30 01:44:02] INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
[2025-09-30 01:44:02] Uploading: /Users/daniel/Documents/code/enreach-tools/data/netbox_devices_export.csv -> page 981533060 as netbox_devices_export.csv
[2025-09-30 01:44:02] Attachment exists (id att981762088); uploading new version
[2025-09-30 01:44:03] Attachment upload complete
[2025-09-30 01:44:03] Name: netbox_devices_export.csv
[2025-09-30 01:44:03] Version: 108
[2025-09-30 01:44:03] Open: https://enreach-services.atlassian.net/wiki/pages/viewpageattachments.action?pageId=981533060&preview=%2F981533060%2F981762088%2Fnetbox_devices_export.csv
[2025-09-30 01:44:04] Confluence page updated with NetBox devices table
[2025-09-30 01:44:04] INFO  [enreach_tools.cli] Legacy script finished netbox-export/bin/confluence_publish_devices_table.py (rc=0)
[2025-09-30 01:44:04] INFO  [enreach_tools.cli] Invoking legacy script netbox-export/bin/confluence_publish_vms_table.py
[2025-09-30 01:44:06] INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
[2025-09-30 01:44:06] INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
[2025-09-30 01:44:10] INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
[2025-09-30 01:44:10] INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
[2025-09-30 01:44:10] Uploading: /Users/daniel/Documents/code/enreach-tools/data/netbox_vms_export.csv -> page 981794840 as netbox_vms_export.csv
[2025-09-30 01:44:11] Attachment exists (id att981893145); uploading new version
[2025-09-30 01:44:11] Attachment upload complete
[2025-09-30 01:44:11] Name: netbox_vms_export.csv
[2025-09-30 01:44:11] Version: 108
[2025-09-30 01:44:11] Open: https://enreach-services.atlassian.net/wiki/pages/viewpageattachments.action?pageId=981794840&preview=%2F981794840%2F981893145%2Fnetbox_vms_export.csv
[2025-09-30 01:44:12] Confluence page updated with NetBox VMs table
[2025-09-30 01:44:12] INFO  [enreach_tools.cli] Legacy script finished netbox-export/bin/confluence_publish_vms_table.py (rc=0)
[2025-09-30 01:44:12] [exit 0]
[2025-10-14 22:37:54] $ uv run python scripts/update_commvault_cache.py --since 6 --limit 1000
[2025-10-14 22:38:01] INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
[2025-10-14 22:38:01] INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
[2025-10-14 22:38:33] Commvault cache updated: cached 348 job(s) within last 6h; 39458 total stored;
[2025-10-14 22:38:33] 318 new / 0 updated
[2025-10-14 22:38:33] Cache timestamp: 2025-10-14T20:38:32.189531+00:00
[2025-10-14 22:38:37] Commvault storage cache updated: 4 pool(s) — total capacity 93.5 TB, used 159 TB
[2025-10-14 22:38:37] Storage cache timestamp: 2025-10-14T20:38:37.845309+00:00
[2025-10-14 22:38:42] Commvault plan cache updated: 15 plan(s) — types: Server
[2025-10-14 22:38:42] Plan cache timestamp: 2025-10-14T20:38:42.827187+00:00
[2025-10-14 22:38:43] [exit 0]
[2025-10-14 22:46:36] $ uv run enreach export cache
[2025-10-14 22:46:38] INFO  [alembic.runtime.migration] Context impl SQLiteImpl.
[2025-10-14 22:46:38] INFO  [alembic.runtime.migration] Will assume non-transactional DDL.
[2025-10-14 22:46:38] Using .env: /Users/daniel/Documents/code/enreach-tools/.env
[2025-10-14 22:46:54] Cache updated /Users/daniel/Documents/code/enreach-tools/data/netbox_cache.json
[2025-10-14 22:46:54] Generated at: 2025-10-14T22:46:38+02:00
[2025-10-14 22:46:54] devices: 2378 total (4 new, 23 updated, 14 removed)
[2025-10-14 22:46:54] vms: 961 total (1 new, 2 updated)
[2025-10-14 22:46:55] [exit 0]
