<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Dataset Viewer</title>
    <link rel="stylesheet" href="styles.css?v=7" />
    <link rel="icon" href="/favicon.ico" type="image/png" />
  </head>
  <body class="theme-nebula">
    <header class="topbar">
      <div class="topbar-primary">
        <div class="brand-group">
          <img class="brand-logo" src="enreach.svg" alt="Enreach logo" />
          <h1 class="brand">Enreach Tools</h1>
        </div>
        <div class="topbar-actions">
          <button id="open-suggestions" class="btn ghost topbar-suggestions" type="button">Suggestions</button>
          <div id="theme-toggle-root" class="topbar-theme"></div>
          <div class="topbar-user">
            <button id="user-menu-toggle" class="user-menu-toggle" type="button" aria-haspopup="true" aria-expanded="false">
              <span class="user-menu-text">
                <span id="user-menu-name" class="user-menu-name">Loading‚Ä¶</span>
                <span id="user-menu-role" class="user-menu-role-text"></span>
              </span>
              <span class="user-menu-caret" aria-hidden="true">‚ñæ</span>
            </button>
            <div id="user-menu" class="user-menu" hidden>
              <div class="user-menu-header">
                <div id="user-menu-name-alt" class="user-menu-name">User</div>
                <div id="user-menu-role-alt" class="user-menu-role-text"></div>
              </div>
              <button class="user-menu-item" type="button" data-user-action="profile">
                <span class="user-menu-icon">üë§</span>
                <span>Profile</span>
              </button>
              <button class="user-menu-item" type="button" data-user-action="preferences">
                <span class="user-menu-icon">‚öôÔ∏è</span>
                <span>Preferences</span>
              </button>
              <button class="user-menu-item" type="button" data-user-action="tokens">
                <span class="user-menu-icon">üîë</span>
                <span>API Tokens</span>
              </button>
              <div class="user-menu-separator" role="separator"></div>
              <a class="user-menu-item logout" href="/auth/logout">
                <span class="user-menu-icon">‚Ü©</span>
                <span>Log Out</span>
              </a>
            </div>
          </div>
        </div>
      </div>
      <!-- Top-level pages navigation -->
      <nav class="tabs" id="pages" aria-label="Pages">
        <button class="tab active" data-page="home">Home</button>
        <button class="tab" data-page="zabbix">Zabbix</button>
        <button class="tab" data-page="netbox">NetBox</button>
        <button class="tab" data-page="jira">Jira</button>
        <button class="tab" data-page="confluence">Confluence</button>
        <button class="tab" data-page="chat">Chat</button>
        <button class="tab" data-page="export">Export</button>
        <button class="tab" data-page="admin">Admin</button>
      </nav>
    </header>

    <main class="main">
      <!-- Export Page -->
      <section class="page" id="page-export">
        <div class="panel panel-export">
          <nav class="tabs" id="ds-tabs" aria-label="Datasets">
            <button class="tab" data-ds="devices">Devices</button>
            <button class="tab" data-ds="vms">VMs</button>
            <button class="tab active" data-ds="all">All</button>
          </nav>
          <div class="toolbar">
            <label class="field grow">
              <span>Search</span>
              <input id="q" type="text" placeholder="Search all columns" />
            </label>
            <button id="hideBtn" class="btn" title="Hide fields">üëÅÔ∏è‚Äçüó®Ô∏è Hide fields</button>
            <button id="resetFilters" class="btn ghost" title="Reset all column filters">Reset filters</button>
            <button id="updateBtn" class="btn" title="Run export and refresh">Update dataset</button>
            <button id="viewLogs" class="btn" title="View recent export logs">View logs</button>
            <button id="downloadCsv" class="btn" title="Download filtered CSV">Download CSV</button>
            <label class="field">
              <span>Density</span>
              <select id="density">
                <option value="comfortable" selected>Comfortable</option>
                <option value="compact">Compact</option>
              </select>
            </label>
            <button id="reload" class="btn">Refresh</button>
            <span id="summary" class="summary"></span>
          </div>
          <div class="grid root" id="grid-root">
            <div class="grid header">
              <div class="header-scroll" id="header-scroll">
                <div class="header-rows">
                  <div class="header-row" id="header-row"></div>
                  <div class="filter-row" id="filter-row"></div>
                </div>
              </div>
            </div>
            <div class="grid body" id="body">
              <div class="body-scroll" id="body-scroll">
                <div class="canvas" id="canvas"></div>
                <div class="rows" id="rows"></div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Suggestions List Page -->
      <section class="page" id="page-suggestions" hidden>
        <div class="panel panel-suggestions">
          <div class="suggestions-toolbar">
            <h2>Suggestions</h2>
            <div class="spacer"></div>
            <button id="suggestion-new" class="btn" type="button">New Suggestion</button>
          </div>
          <div id="suggestion-list" class="suggestion-list empty"></div>
        </div>
      </section>

      <!-- Suggestion Detail Page -->
      <section class="page" id="page-suggestion-detail" hidden>
        <div class="panel panel-suggestion-detail">
          <div class="suggestion-detail-header">
            <button id="suggestion-back" class="btn ghost" type="button">‚Üê Back to Suggestions</button>
            <div id="suggestion-detail-meta" class="suggestion-detail-meta"></div>
          </div>
          <div class="suggestion-form-grid">
            <div class="suggestion-form-main">
              <label class="field column">
                <span>Title</span>
                <input id="suggestion-title" type="text" placeholder="Title" />
              </label>
              <label class="field column">
                <span>Summary</span>
                <textarea id="suggestion-summary" rows="4" placeholder="Summary"></textarea>
              </label>
              <div class="suggestion-form-row">
                <label class="field column">
                  <span>Classification</span>
                  <select id="suggestion-classification"></select>
                </label>
                <label class="field column">
                  <span>Status</span>
                  <select id="suggestion-status"></select>
                </label>
              </div>
              <div class="suggestion-actions">
                <button id="suggestion-delete" class="btn danger" type="button" hidden>Delete</button>
                <button id="suggestion-save" class="btn" type="button">Save</button>
              </div>
            </div>
            <div id="suggestion-comments-wrapper" class="suggestion-comments">
              <h3>Comments</h3>
              <div class="suggestion-comment-compose">
                <textarea id="suggestion-comment-text" rows="3" placeholder="Add a comment..."></textarea>
                <button id="suggestion-comment-add" class="btn" type="button">Comment</button>
              </div>
              <div id="suggestion-comments" class="suggestion-comment-list empty"></div>
            </div>
          </div>
        </div>
      </section>

      <!-- Account Page -->
      <section class="page" id="page-account" hidden>
        <div class="panel panel-account">
          <div class="account-header">
            <div>
              <h2>My Account</h2>
              <p id="account-subtitle" class="account-subtitle"></p>
            </div>
          </div>
          <nav class="account-tabs" id="account-tabs">
            <button class="account-tab active" data-account-tab="profile">Profile</button>
            <button class="account-tab" data-account-tab="preferences">Preferences</button>
            <button class="account-tab" data-account-tab="password">Password</button>
            <button class="account-tab" data-account-tab="tokens">API Tokens</button>
          </nav>
          <div class="account-panels">
            <section class="account-panel active" data-account-panel="profile">
              <form id="account-profile-form" class="account-form">
                <div class="field column">
                  <span>Display name</span>
                  <input id="account-profile-display" type="text" placeholder="Your name" />
                </div>
                <div class="field column">
                  <span>Email</span>
                  <input id="account-profile-email" type="email" placeholder="you@example.com" />
                </div>
                <div class="account-actions">
                  <button id="account-profile-save" type="submit" class="btn">Save changes</button>
                  <span id="account-profile-status" class="form-status" role="status"></span>
                </div>
              </form>
            </section>
            <section class="account-panel" data-account-panel="preferences">
              <div class="account-preferences">
                <div class="account-preference-item">
                  <h3>Theme</h3>
                  <p>Use the theme selector in the header to switch between available themes. Your choice is remembered per browser.</p>
                  <div id="account-theme-mount"></div>
                </div>
                <div class="account-preference-item">
                  <h3>Export page defaults</h3>
                  <label class="field column">
                    <span>Default dataset tab</span>
                    <select id="account-pref-dataset">
                      <option value="all">All</option>
                      <option value="devices">Devices</option>
                      <option value="vms">VMs</option>
                    </select>
                  </label>
                </div>
              </div>
            </section>
            <section class="account-panel" data-account-panel="password">
              <form id="account-password-form" class="account-form">
                <div class="field column">
                  <span>Current password</span>
                  <input id="account-password-current" type="password" autocomplete="current-password" placeholder="Current password" />
                </div>
                <div class="field column">
                  <span>New password</span>
                  <input id="account-password-new" type="password" autocomplete="new-password" placeholder="New password" required />
                  <small>Minimum 8 characters.</small>
                </div>
                <div class="account-actions">
                  <button id="account-password-save" type="submit" class="btn">Update password</button>
                  <span id="account-password-status" class="form-status" role="status"></span>
                </div>
              </form>
            </section>
            <section class="account-panel" data-account-panel="tokens">
              <div class="account-token-panel">
                <div class="account-token-list" id="account-api-list"></div>
                <form id="account-api-form" class="account-form account-token-form">
                  <h3>Override provider key</h3>
                  <div class="account-token-grid">
                    <label class="field column">
                      <span>Provider</span>
                      <select id="account-api-provider"></select>
                    </label>
                    <label class="field column">
                      <span>Label (optional)</span>
                      <input id="account-api-label" type="text" placeholder="My dedicated key" />
                    </label>
                  </div>
                  <label class="field column">
                    <span>API key / token</span>
                    <textarea id="account-api-secret" rows="3" placeholder="Paste secret..."></textarea>
                  </label>
                  <div class="account-actions">
                    <button id="account-api-save" type="submit" class="btn">Save key</button>
                    <span id="account-api-status" class="form-status" role="status"></span>
                  </div>
                </form>
              </div>
            </section>
          </div>
        </div>
      </section>

      <!-- Admin Page -->
      <section class="page" id="page-admin" hidden>
        <div class="panel panel-admin">
          <div class="admin-header">
            <h2>Admin Settings</h2>
            <span id="admin-status" class="admin-status"></span>
          </div>
          <nav class="admin-tabs" id="admin-tabs">
            <button class="admin-tab active" data-admin-tab="zabbix">Zabbix</button>
            <button class="admin-tab" data-admin-tab="net-atlassian">NetBox &amp; Atlassian</button>
            <button class="admin-tab" data-admin-tab="chat">AI Chat</button>
            <button class="admin-tab" data-admin-tab="export">Export</button>
            <button class="admin-tab" data-admin-tab="api">API &amp; UI</button>
            <button class="admin-tab" data-admin-tab="users">Users</button>
            <button class="admin-tab" data-admin-tab="backup">Backup</button>
          </nav>
          <div id="admin-settings" class="admin-panels">
            <section id="admin-panel-zabbix" class="admin-panel active" data-admin-tab="zabbix">
              <div id="admin-settings-zabbix" class="admin-settings-group"></div>
            </section>
            <section id="admin-panel-net" class="admin-panel" data-admin-tab="net-atlassian">
              <div id="admin-settings-net" class="admin-settings-group"></div>
            </section>
            <section id="admin-panel-chat" class="admin-panel" data-admin-tab="chat">
              <div id="admin-settings-chat" class="admin-settings-group"></div>
            </section>
            <section id="admin-panel-export" class="admin-panel" data-admin-tab="export">
              <div id="admin-settings-export" class="admin-settings-group"></div>
            </section>
            <section id="admin-panel-api" class="admin-panel" data-admin-tab="api">
              <div id="admin-settings-api" class="admin-settings-group"></div>
            </section>
            <section id="admin-panel-users" class="admin-panel" data-admin-tab="users">
              <div class="admin-users-header">
                <div class="admin-users-actions">
                  <button id="admin-user-refresh" class="btn ghost" type="button">Refresh</button>
                  <label class="field">
                    <input id="admin-user-include-inactive" type="checkbox" />
                    <span>Show inactive</span>
                  </label>
                  <span id="admin-user-status" class="form-status"></span>
                </div>
                <button id="admin-user-create" class="btn" type="button">New user</button>
              </div>
              <div class="admin-users-layout">
                <div class="admin-user-list" id="admin-user-list"></div>
                <div class="admin-user-detail" id="admin-user-detail">
                  <div id="admin-user-empty" class="account-empty">Select a user to view details.</div>
                  <form id="admin-user-form" class="account-form hidden">
                    <h3 id="admin-user-form-title">User</h3>
                    <div class="field column">
                      <span>Username</span>
                      <input id="admin-user-username" type="text" readonly />
                    </div>
                  <div class="field column">
                    <span>Display name</span>
                    <input id="admin-user-display" type="text" placeholder="Name" />
                  </div>
                  <div class="field column">
                    <span>Email</span>
                    <input id="admin-user-email" type="email" placeholder="user@example.com" />
                  </div>
                  <div class="field column create-only" id="admin-user-new-password-row">
                    <span>Initial password</span>
                    <input id="admin-user-new-password" type="password" placeholder="Set a password" />
                  </div>
                    <label class="field column">
                      <span>Role</span>
                      <select id="admin-user-role">
                        <option value="member">Member</option>
                        <option value="admin">Admin</option>
                      </select>
                    </label>
                    <label class="field">
                      <input id="admin-user-active" type="checkbox" />
                      <span>Active</span>
                    </label>
                    <div class="account-actions">
                      <button id="admin-user-save" type="submit" class="btn">Save user</button>
                      <span id="admin-user-form-status" class="form-status"></span>
                    </div>
                  </form>
                  <form id="admin-user-password-form" class="account-form hidden">
                    <h3>Reset password</h3>
                    <div class="field column">
                      <span>New password</span>
                      <input id="admin-user-password" type="password" placeholder="New password" />
                    </div>
                    <div class="account-actions">
                      <button id="admin-user-password-save" type="submit" class="btn ghost">Set password</button>
                      <span id="admin-user-password-status" class="form-status"></span>
                    </div>
                  </form>
                  <button id="admin-user-delete" class="btn danger hidden" type="button">Delete user</button>
                </div>
              </div>
              <div class="admin-global-keys">
                <div class="admin-users-header">
                  <h3>Global API Keys</h3>
                  <div class="admin-users-actions">
                    <button id="admin-global-add" class="btn ghost" type="button">Add key</button>
                    <span id="admin-global-status" class="form-status"></span>
                  </div>
                </div>
                <div id="admin-global-list" class="account-token-list"></div>
                <form id="admin-global-form" class="account-form hidden">
                  <div class="account-token-grid">
                    <label class="field column">
                      <span>Provider</span>
                      <select id="admin-global-provider"></select>
                    </label>
                    <label class="field column">
                      <span>Label (optional)</span>
                      <input id="admin-global-label" type="text" placeholder="Default key" />
                    </label>
                  </div>
                  <label class="field column">
                    <span>Secret</span>
                    <textarea id="admin-global-secret" rows="3" placeholder="Paste API key"></textarea>
                  </label>
                  <div class="account-actions">
                    <button id="admin-global-save" type="submit" class="btn">Save global key</button>
                    <button id="admin-global-cancel" type="button" class="btn ghost">Cancel</button>
                  </div>
                </form>
              </div>
            </section>
            <section id="admin-panel-backup" class="admin-panel" data-admin-tab="backup">
              <div id="admin-settings-backup" class="admin-settings-group"></div>
              <details class="admin-advanced">
                <summary>Manual Sync</summary>
                <p class="muted">Run a Dropbox sync to back up the latest exports immediately.</p>
                <button id="admin-sync" class="btn ghost" type="button">Run Dropbox Sync</button>
              </details>
            </section>
          </div>
        </div>
      </section>

      <!-- NetBox Search Page -->
      <section class="page" id="page-netbox" hidden>
        <div class="panel">
          <h2>NetBox Search</h2>
          <div class="toolbar" style="margin: 8px 0 12px">
            <label class="field grow">
              <span>Search</span>
              <input id="nb-q" type="text" placeholder="Full‚Äëtext query" />
            </label>
            <button id="nb-search" class="btn">Search</button>
            <div class="spacer"></div>
            <label class="field">
              <span>Max</span>
              <select id="nb-max">
                <option value="0">All</option>
                <option value="25">25</option>
                <option value="50" selected>50</option>
                <option value="100">100</option>
                <option value="200">200</option>
              </select>
            </label>
            <button id="nb-reset" class="btn ghost">Reset</button>
          </div>
          <div id="nb-results" class="feed empty">Not searched yet.</div>
        </div>
      </section>

      <!-- Home Page -->
      <section class="page" id="page-home" hidden>
        <div class="panel">
          <h2>Home</h2>
          <div class="toolbar" style="margin: 8px 0 12px">
            <label class="field grow">
              <span>Search</span>
              <input id="home-q" type="text" placeholder="Object name (e.g., device, vm, IP, keyword)" />
            </label>
            <button id="home-search" class="btn">Search</button>
            <div class="spacer"></div>
            <label class="field">
              <span>Zabbix</span>
              <input id="home-zlimit" type="number" min="0" value="10" style="width:80px" />
            </label>
            <label class="field">
              <span>Jira</span>
              <input id="home-jlimit" type="number" min="0" value="10" style="width:80px" />
            </label>
            <label class="field">
              <span>Confluence</span>
              <input id="home-climit" type="number" min="0" value="10" style="width:100px" />
            </label>
          </div>
          <div id="home-results" class="feed empty">Enter a search term and press Search.</div>
        </div>
      </section>

      <!-- Chat Page -->
      <section class="page" id="page-chat" hidden>
        <div class="chat-container">
          <!-- Sidebar with chat sessions -->
          <div class="chat-sidebar">
            <div class="chat-sidebar-header">
              <button id="chat-new" class="btn btn-new-chat">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <line x1="12" y1="5" x2="12" y2="19"></line>
                  <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
                New chat
              </button>
            </div>
            <div class="chat-sessions" id="chat-sessions">
              <div class="chat-sessions-empty">No chats yet</div>
            </div>
          </div>
          
          <!-- Main chat area -->
          <div class="chat-main">
            <div class="chat-header">
              <h2>AI Chat</h2>
              <div class="chat-header-controls">
                <label class="field">
                  <span>Provider</span>
                  <select id="chat-provider">
                    <option value="openai">OpenAI</option>
                    <option value="openrouter">OpenRouter</option>
                    <option value="claude">Claude</option>
                    <option value="gemini">Gemini</option>
                    <option value="other">Other</option>
                  </select>
                </label>
                <label class="field">
                  <span>Model</span>
                  <input id="chat-model" type="text" placeholder="e.g. gpt-4o, claude-3-5, gemini-1.5" />
                </label>
                <label class="field">
                  <span>Data source</span>
                  <select id="chat-dataset">
                    <option value="merged" selected>NetBox merged export (CSV)</option>
                    <option value="devices">Devices export (CSV)</option>
                    <option value="vms">VMs export (CSV)</option>
                  </select>
                </label>
              </div>
            </div>
            
            <div class="chat-messages" id="chat-messages">
              <div class="chat-empty-state">
                <div class="chat-empty-icon">üí¨</div>
                <h3>Welcome to AI Chat</h3>
                <p>Ask me anything about your data. I'll help you analyze and provide insights.</p>
                <div class="chat-suggestions">
                  <button class="chat-suggestion-btn" data-suggestion="Show me the latest devices added to NetBox">
                    Show latest devices
                  </button>
                  <button class="chat-suggestion-btn" data-suggestion="What are the current active alerts in Zabbix?">
                    Current alerts
                  </button>
                  <button class="chat-suggestion-btn" data-suggestion="Summarize the recent Jira tickets">
                    Recent tickets
                  </button>
                </div>
              </div>
            </div>
            
            <div class="chat-input-container">
              <div class="chat-input-wrapper">
                <textarea
                  id="chat-input"
                  class="chat-input-textarea"
                  placeholder="Message AI Chat..."
                  rows="1"
                ></textarea>
                <button id="chat-send" class="chat-send-btn">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="22" y1="2" x2="11" y2="13"></line>
                    <polygon points="22,2 15,22 11,13 2,9"></polygon>
                  </svg>
                </button>
              </div>
              <div class="chat-input-footer">
                <label class="chat-checkbox">
                  <input id="chat-include-data" type="checkbox" checked />
                  <span>Use data context</span>
                </label>
                <label class="chat-checkbox">
                  <input id="chat-stream" type="checkbox" checked />
                  <span>Stream responses</span>
                </label>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Zabbix Page -->
      <section class="page" id="page-zabbix" hidden>
        <div class="panel panel-zbx">
          <h2 class="panel-title">Zabbix</h2>
          <div class="toolbar" style="margin: 4px 0 8px">
            <button id="zbx-refresh" class="btn-icon btn-refresh" title="Refresh" aria-label="Refresh">
              <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
                <!-- Dual-arrow refresh icon (simple) -->
                <path d="M8 6a8 8 0 0 1 11 5" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <path d="M18 4v6h-6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <path d="M16 18a8 8 0 0 1-11-5" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <path d="M6 20v-6h6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </button>
            <button id="zbx-ack" class="btn" title="Acknowledge selected problems">Ack</button>
            <button id="zbx-home" class="btn" title="Search selected on Home">Home Search</button>
            <a class="btn" href="https://zabbix.enreach.tech/zabbix.php" target="_blank" rel="noopener">Open Zabbix</a>
            <div class="spacer"></div>
            <label class="field">
              <input id="zbx-unack" type="checkbox" />
              <span>Show unacknowledged only</span>
            </label>
            <label class="field">
              <input id="zbx-systems" type="checkbox" checked />
              <span>Only System (+ subgroups)</span>
            </label>
            <label class="field">
              <span>Auto refresh</span>
              <select id="zbx-refresh-interval">
                <option value="0" selected>Off</option>
                <option value="30000">30s</option>
                <option value="60000">1m</option>
                <option value="120000">2m</option>
                <option value="300000">5m</option>
              </select>
            </label>
            <label class="field">
              <span>Density</span>
              <select id="zbx-density">
                <option value="comfortable" selected>Comfortable</option>
                <option value="compact">Compact</option>
              </select>
            </label>
            <span id="zbx-stats" class="summary"></span>
          </div>
          <div id="zbx-feed" class="feed empty">No Zabbix connection configured yet.</div>
        </div>
      </section>

      <!-- Zabbix Host Details Page -->
      <section class="page" id="page-zhost" hidden>
        <div class="panel">
          <h2 id="zhost-title">Host</h2>
          <div class="toolbar" style="margin: 8px 0 12px">
            <button id="zhost-back" class="btn">‚¨Ö Back to Zabbix</button>
            <a id="zhost-open-zbx" class="btn" href="#" target="_blank" rel="noopener">Open in Zabbix</a>
            <div class="spacer"></div>
            <button id="zhost-ack" class="btn" title="Acknowledge selected problems">Ack</button>
            <span id="zhost-stats" class="summary" style="margin-left: 8px;"></span>
          </div>
          <div id="zhost-info" class="feed empty">Loading‚Ä¶</div>
          <hr />
          <h3>Problems (no filters)</h3>
          <div id="zhost-problems" class="feed empty">Loading‚Ä¶</div>
        </div>
      </section>

      <!-- Jira Page -->
      <section class="page" id="page-jira" hidden>
        <div class="panel">
          <h2>Jira</h2>
          <div class="toolbar" style="margin: 8px 0 12px">
            <label class="field grow">
              <span>Search</span>
              <input id="jira-q" type="text" placeholder="Full‚Äëtext (text ~ ...)" />
            </label>
            <label class="field">
              <span>Project</span>
              <input id="jira-project" type="text" placeholder="e.g. ABC" />
            </label>
            <label class="field">
              <span>Status</span>
              <input id="jira-status" type="text" placeholder="e.g. To Do, In Progress" />
            </label>
            <label class="field">
              <span>Assignee</span>
              <input id="jira-assignee" type="text" placeholder="name/email" />
            </label>
            <label class="field">
              <span>Priority</span>
              <input id="jira-priority" type="text" placeholder="e.g. High" />
            </label>
            <label class="field">
              <span>Type</span>
              <input id="jira-type" type="text" placeholder="e.g. Bug, Task" />
            </label>
            <label class="field">
              <span>Team (Service Desk)</span>
              <input id="jira-team" type="text" value="Systems Infrastructure" placeholder="e.g. Systems Infrastructure" />
            </label>
            <label class="field">
              <span>Updated</span>
              <select id="jira-updated">
                <option value="-7d">7d</option>
                <option value="-14d">14d</option>
                <option value="-30d" selected>30d</option>
                <option value="">All</option>
              </select>
            </label>
            <label class="field">
              <input id="jira-open" type="checkbox" checked />
              <span>Open only</span>
            </label>
            <label class="field">
              <span>Max</span>
              <select id="jira-max">
                <option value="25">25</option>
                <option value="50" selected>50</option>
                <option value="100">100</option>
              </select>
            </label>
            <button id="jira-search" class="btn">Search</button>
            <button id="jira-reset" class="btn ghost">Reset</button>
          </div>
          <div id="jira-results" class="feed empty">Not searched yet or configuration missing.</div>
        </div>
      </section>

      <!-- Confluence Page -->
      <section class="page" id="page-confluence" hidden>
        <div class="panel">
          <h2>Confluence</h2>
          <div class="toolbar" style="margin: 8px 0 12px">
            <label class="field grow">
              <span>Search</span>
              <input id="conf-q" type="text" placeholder="Full‚Äëtext (text ~ ‚Ä¶)" />
            </label>
            <label class="field">
              <span>Space</span>
              <input id="conf-space" type="text" placeholder="e.g. DOCS or exact name" />
            </label>
            <label class="field">
              <span>Type</span>
              <select id="conf-type">
                <option value="page" selected>Page</option>
                <option value="blogpost">Blog post</option>
                <option value="attachment">Attachment</option>
              </select>
            </label>
            <label class="field">
              <span>Labels</span>
              <input id="conf-labels" type="text" placeholder="comma‚Äëseparated" />
            </label>
            <label class="field">
              <span>Updated</span>
              <select id="conf-updated">
                <option value="" selected>All</option>
                <option value="-7d">7d</option>
                <option value="-30d">30d</option>
                <option value="-90d">90d</option>
              </select>
            </label>
            <label class="field">
              <span>Max</span>
              <select id="conf-max">
                <option value="25">25</option>
                <option value="50" selected>50</option>
                <option value="100">100</option>
              </select>
            </label>
            <button id="conf-search" class="btn">Search</button>
            <button id="conf-reset" class="btn ghost">Reset</button>
          </div>
          <div id="conf-results" class="feed empty">Not searched yet.</div>
        </div>
      </section>
    </main>

    <!-- Hide fields panel -->
    <div id="fields-panel" class="fields-panel" hidden>
      <div class="fields-head">
        <div class="fields-title">
          <strong>Hide fields</strong>
          <div class="spacer"></div>
          <button id="fields-collapse" class="btn-icon" title="Close">‚úï</button>
        </div>
        <input id="fields-search" class="fields-search" type="text" placeholder="Find a field" />
      </div>
      <div id="fields-list" class="fields-list" role="listbox" aria-label="Columns"></div>
      <div class="fields-actions">
        <button id="hide-all" class="btn ghost">Hide all</button>
        <button id="show-all" class="btn ghost">Show all</button>
      </div>
    </div>

    <!-- Progress panel -->
    <div id="progress-panel" class="progress-panel" hidden>
      <div class="progress-head">
        <strong>Updating dataset‚Ä¶</strong>
        <div class="spacer"></div>
        <button id="progress-close" class="btn-icon" title="Close">‚úï</button>
      </div>
      <pre id="progress-log" class="progress-log"></pre>
      <!-- Manual resize handles for both corners -->
      <div id="resize-se" class="resize-handle se" title="Resize"></div>
      <div id="resize-sw" class="resize-handle sw" title="Resize"></div>
    </div>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="app.js?v=9"></script>
  </body>
  </html>
