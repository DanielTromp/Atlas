<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Infrastructure Atlas</title>
    <link rel="stylesheet" href="styles.css?v=7" />
    <link rel="icon" href="/favicon.png" type="image/png" />
  </head>
  <body class="theme-silver-dark">
    <script>
      (function () {
        try {
          var storageKey = 'atlas_theme_v1';
          var stored = localStorage.getItem(storageKey);
          var allowed = [
            'nebula-light', 'nebula-dark',
            'forest-light', 'forest-dark',
            'jade-light', 'jade-dark',
            'coral-light', 'coral-dark',
            'midnight-light', 'midnight-dark',
            'silver-light', 'silver-dark',
            'default'
          ];
          if (stored === 'atlas-light') {
            stored = 'nebula-light';
          } else if (stored === 'nebula') {
            stored = 'nebula-dark';
          }
          var theme = allowed.includes(stored) ? stored : 'silver-dark';
          var prefix = 'theme-';
          document.body.classList.remove(
            prefix + 'atlas-light',
            prefix + 'nebula',
            prefix + 'nebula-light',
            prefix + 'nebula-dark',
            prefix + 'forest-light',
            prefix + 'forest-dark',
            prefix + 'jade-light',
            prefix + 'jade-dark',
            prefix + 'coral-light',
            prefix + 'coral-dark',
            prefix + 'midnight-light',
            prefix + 'midnight-dark',
            prefix + 'silver-light',
            prefix + 'silver-dark',
            prefix + 'default'
          );
          document.body.classList.add(prefix + theme);
        } catch (err) {
          /* ignore bootstrap theme errors */
        }
      })();
    </script>
    <div class="app-shell" id="app-shell">
      <aside class="sidebar" id="sidebar" data-collapsed="false" aria-label="Primary navigation">
        <div class="sidebar-inner">
          <div class="sidebar-header">
            <div class="sidebar-brand">
              <div class="brand-logo" id="app-brand-logo" hidden></div>
              <span class="sidebar-brand-name">Infrastructure Atlas</span>
            </div>
            <button id="sidebar-collapse" class="sidebar-collapse" type="button" aria-label="Collapse sidebar" aria-controls="sidebar" aria-expanded="true">
              <span class="sidebar-collapse-icon" aria-hidden="true">‚Äπ</span>
            </button>
          </div>
          <nav class="sidebar-nav" id="pages" aria-label="Pages">
            <div class="sidebar-group" data-page="chat">
              <button class="tab sidebar-item" data-page="chat" type="button">
                <span class="sidebar-item-icon" aria-hidden="true">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M8.625 12a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 0 1-2.555-.337A5.972 5.972 0 0 1 5.41 20.97a5.969 5.969 0 0 1-.474-.065 4.48 4.48 0 0 0 .978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25Z"></path>
                  </svg>
                </span>
                <span class="sidebar-item-label">AI Chat</span>
              </button>
            </div>
            <div class="sidebar-group" data-page="search">
              <button class="tab sidebar-item" data-page="search" type="button">
                <span class="sidebar-item-icon" aria-hidden="true">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"></path>
                  </svg>
                </span>
                <span class="sidebar-item-label">Search</span>
              </button>
            </div>
            <div class="sidebar-group" data-page="zabbix">
              <button class="tab sidebar-item" data-page="zabbix" type="button">
                <span class="sidebar-item-icon" aria-hidden="true">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0M3.124 7.5A8.969 8.969 0 0 1 5.292 3m13.416 0a8.969 8.969 0 0 1 2.168 4.5"></path>
                  </svg>
                </span>
                <span class="sidebar-item-label">Zabbix</span>
              </button>
            </div>
            <div class="sidebar-group" data-page="netbox">
              <button class="tab sidebar-item" data-page="netbox" type="button">
                <span class="sidebar-item-icon" aria-hidden="true">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M5.25 14.25h13.5m-13.5 0a3 3 0 0 1-3-3m3 3a3 3 0 1 0 0 6h13.5a3 3 0 1 0 0-6m-16.5-3a3 3 0 0 1 3-3h13.5a3 3 0 0 1 3 3m-19.5 0a4.5 4.5 0 0 1 .9-2.7L5.737 5.1a3.375 3.375 0 0 1 2.7-1.35h7.126c1.062 0 2.062.5 2.7 1.35l2.587 3.45a4.5 4.5 0 0 1 .9 2.7m0 0a3 3 0 0 1-3 3m0 3h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Zm-3 6h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Z"></path>
                  </svg>
                </span>
                <span class="sidebar-item-label">NetBox</span>
              </button>
            </div>
            <div class="sidebar-group" data-page="jira">
              <button class="tab sidebar-item" data-page="jira" type="button">
                <span class="sidebar-item-icon" aria-hidden="true">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"></path>
                  </svg>
                </span>
                <span class="sidebar-item-label">Jira</span>
              </button>
            </div>
            <div class="sidebar-group" data-page="drafts">
              <button class="tab sidebar-item" data-page="drafts" type="button">
                <span class="sidebar-item-icon" aria-hidden="true">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"></path>
                  </svg>
                </span>
                <span class="sidebar-item-label">Tickets</span>
              </button>
            </div>
            <div class="sidebar-group" data-page="confluence">
              <button class="tab sidebar-item" data-page="confluence" type="button">
                <span class="sidebar-item-icon" aria-hidden="true">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"></path>
                  </svg>
                </span>
                <span class="sidebar-item-label">Confluence</span>
              </button>
            </div>
            <div class="sidebar-group" data-page="export">
              <button class="tab sidebar-item" data-page="export" type="button" aria-controls="sidebar-subitems-export" aria-expanded="false">
                <span class="sidebar-item-icon" aria-hidden="true">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"></path>
                  </svg>
                </span>
                <span class="sidebar-item-label">Export</span>
              </button>
              <div class="sidebar-subitems" id="sidebar-subitems-export" data-subnav-container="export" hidden></div>
            </div>
            <div class="sidebar-group" data-page="commvault">
              <button class="tab sidebar-item" data-page="commvault" type="button" aria-controls="sidebar-subitems-commvault" aria-expanded="false">
                <span class="sidebar-item-icon" aria-hidden="true">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M12 9.75v6.75m0 0-3-3m3 3 3-3m-8.25 6a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"></path>
                  </svg>
                </span>
                <span class="sidebar-item-label">Commvault</span>
              </button>
              <div class="sidebar-subitems" id="sidebar-subitems-commvault" data-subnav-container="commvault" hidden></div>
            </div>
            <div class="sidebar-group" data-page="vcenter">
              <button class="tab sidebar-item" data-page="vcenter" type="button" aria-controls="sidebar-subitems-vcenter" aria-expanded="false">
                <span class="sidebar-item-icon" aria-hidden="true">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="m21 7.5-2.25-1.313M21 7.5v2.25m0-2.25-2.25 1.313M3 7.5l2.25-1.313M3 7.5l2.25 1.313M3 7.5v2.25m9 3 2.25-1.313M12 12.75l-2.25-1.313M12 12.75V15m0 6.75 2.25-1.313M12 21.75V19.5m0 2.25-2.25-1.313m0-16.875L12 2.25l2.25 1.313M21 14.25v2.25l-2.25 1.313m-13.5 0L3 16.5v-2.25"></path>
                  </svg>
                </span>
                <span class="sidebar-item-label">vCenter</span>
              </button>
              <div class="sidebar-subitems" id="sidebar-subitems-vcenter" data-subnav-container="vcenter" hidden></div>
            </div>
            <div class="sidebar-group" data-page="foreman">
              <button class="tab sidebar-item" data-page="foreman" type="button" aria-controls="sidebar-subitems-foreman" aria-expanded="false">
                <span class="sidebar-item-icon" aria-hidden="true">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M5.25 14.25h13.5m-13.5 0a3 3 0 0 1-3-3m3 3a3 3 0 1 0 0 6h13.5a3 3 0 1 0 0-6m-16.5-3a3 3 0 0 1 3-3h13.5a3 3 0 0 1 3 3m-19.5 0a4.5 4.5 0 0 1 .9-2.7L5.737 5.1a3.375 3.375 0 0 1 2.7-1.35h7.126c1.062 0 2.062.5 2.7 1.35l2.587 3.45a4.5 4.5 0 0 1 .9 2.7m0 0a3 3 0 0 1-3 3m0 3h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Zm-3 6h.008v.008h-.008v-.008Zm0-6h.008v.008h-.008v-.008Z"></path>
                  </svg>
                </span>
                <span class="sidebar-item-label">Foreman</span>
              </button>
              <div class="sidebar-subitems" id="sidebar-subitems-foreman" data-subnav-container="foreman" hidden></div>
            </div>
            <div class="sidebar-group" data-page="puppet">
              <button class="tab sidebar-item" data-page="puppet" type="button" aria-controls="sidebar-subitems-puppet" aria-expanded="false">
                <span class="sidebar-item-icon" aria-hidden="true">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"></path>
                  </svg>
                </span>
                <span class="sidebar-item-label">Puppet</span>
              </button>
              <div class="sidebar-subitems" id="sidebar-subitems-puppet" data-subnav-container="puppet" hidden></div>
            </div>
            <div class="sidebar-group" data-page="tools">
              <button class="tab sidebar-item" data-page="tools" type="button">
                <span class="sidebar-item-icon" aria-hidden="true">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M11.42 15.17 17.25 21A2.652 2.652 0 0 0 21 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 1 1-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 0 0 4.486-6.336l-3.276 3.277a3.004 3.004 0 0 1-2.25-2.25l3.276-3.276a4.5 4.5 0 0 0-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437 1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008Z"></path>
                  </svg>
                </span>
                <span class="sidebar-item-label">Tools</span>
              </button>
            </div>
            <div class="sidebar-group" data-page="tasks">
              <button class="tab sidebar-item" data-page="tasks" type="button">
                <span class="sidebar-item-icon" aria-hidden="true">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"></path>
                  </svg>
                </span>
                <span class="sidebar-item-label">Tasks</span>
              </button>
            </div>
            <div class="sidebar-group" data-page="admin">
              <button class="tab sidebar-item" data-page="admin" type="button" aria-controls="sidebar-subitems-admin" aria-expanded="false">
                <span class="sidebar-item-icon" aria-hidden="true">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"></path>
                    <path d="M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"></path>
                  </svg>
                </span>
                <span class="sidebar-item-label">Admin</span>
              </button>
              <div class="sidebar-subitems" id="sidebar-subitems-admin" data-subnav-container="admin" hidden></div>
            </div>
          </nav>
        </div>
        <div class="sidebar-footer">
          <div id="theme-toggle-root" class="sidebar-theme"></div>
        </div>
        <script>
  (function () {
    const logo = document.getElementById('app-brand-logo');
    if (!logo) return;
    const img = document.createElement('img');
    img.alt = 'Atlas logo';
    const show = () => { logo.hidden = false; };
    const hide = () => {
      logo.hidden = true;
      logo.replaceChildren();
    };
    img.addEventListener('error', hide);
    img.addEventListener('load', show);
    img.src = 'logo.png';
    logo.appendChild(img);
    if (img.complete && img.naturalWidth > 0) {
      show();
    }
  })();
</script>
      </aside>
      <div class="app-main">
        <header class="topbar">
          <div class="topbar-primary">
            <div class="brand-group topbar-brand">
              <button id="sidebar-drawer-toggle" class="sidebar-trigger" type="button" aria-label="Open navigation" aria-controls="sidebar" aria-expanded="false">
                <span class="sidebar-trigger-bar"></span>
                <span class="sidebar-trigger-bar"></span>
                <span class="sidebar-trigger-bar"></span>
              </button>
              <h1 class="brand" id="topbar-title">Infrastructure Atlas</h1>
            </div>
            <div class="topbar-actions">
              <button id="open-suggestions" class="btn ghost topbar-suggestions" type="button">Suggestions</button>
              <div class="topbar-user">
                <button id="user-menu-toggle" class="user-menu-toggle" type="button" aria-haspopup="true" aria-expanded="false">
                  <span class="user-menu-text">
                    <span id="user-menu-name" class="user-menu-name">Loading‚Ä¶</span>
                  </span>
                  <span class="user-menu-caret" aria-hidden="true">‚ñæ</span>
                </button>
                <div id="user-menu" class="user-menu" hidden>
                  <div class="user-menu-header">
                    <div id="user-menu-name-alt" class="user-menu-name">User</div>
                    <div id="user-menu-role-alt" class="user-menu-role-text"></div>
                  </div>
                  <button class="user-menu-item" type="button" data-user-action="profile">
                    <span class="user-menu-icon">üë§</span>
                    <span>Profile</span>
                  </button>
                  <button class="user-menu-item" type="button" data-user-action="preferences">
                    <span class="user-menu-icon">‚öôÔ∏è</span>
                    <span>Preferences</span>
                  </button>
                  <button class="user-menu-item" type="button" data-user-action="tokens">
                    <span class="user-menu-icon">üîë</span>
                    <span>API Tokens</span>
                  </button>
                  <div class="user-menu-separator" role="separator"></div>
                  <a class="user-menu-item logout" href="/auth/logout">
                    <span class="user-menu-icon">‚Ü©</span>
                    <span>Log Out</span>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </header>
        <main class="main" id="main-content">
      <!-- AI Chat Page -->
      <section class="page" id="page-chat" hidden>
        <div class="panel panel-chat">
          <div class="chat-layout">
            <div class="chat-main">
              <div class="chat-header">
                <h2>AI Chat</h2>
                <div class="chat-controls">
                  <label class="field">
                    <span>Provider</span>
                    <select id="chat-provider">
                      <option value="azure_openai">Azure OpenAI</option>
                      <option value="openai">OpenAI</option>
                      <option value="anthropic">Anthropic</option>
                      <option value="openrouter">OpenRouter</option>
                      <option value="gemini">Google Gemini</option>
                    </select>
                  </label>
                  <label class="field">
                    <span>Model</span>
                    <select id="chat-model">
                      <option value="">Default</option>
                    </select>
                  </label>
                  <label class="field">
                    <input id="chat-stream" type="checkbox" checked />
                    <span>Stream</span>
                  </label>
                  <label class="field">
                    <input id="chat-include-data" type="checkbox" />
                    <span>Enable tools</span>
                  </label>
                  <button id="chat-new" class="btn" type="button">New chat</button>
                </div>
              </div>
              <div id="chat-messages" class="chat-messages"></div>
              <div class="chat-input-area">
                <textarea id="chat-input" class="chat-input" placeholder="Ask me anything about your infrastructure..." rows="2"></textarea>
                <button id="chat-send" class="btn chat-send" type="button">Send</button>
              </div>
            </div>
            <aside class="chat-sidebar">
              <div class="chat-sidebar-header">
                <nav class="chat-sidebar-tabs" role="tablist">
                  <button type="button" class="chat-sidebar-tab active" data-tab="sessions" role="tab" onclick="switchChatSidebarTab('sessions')">Sessions</button>
                  <button type="button" class="chat-sidebar-tab" data-tab="stats" role="tab" onclick="switchChatSidebarTab('stats')">Stats</button>
                  <button type="button" class="chat-sidebar-tab" data-tab="tools" role="tab" onclick="switchChatSidebarTab('tools')">Tools</button>
                  <button type="button" class="chat-sidebar-tab" data-tab="commands" role="tab" onclick="switchChatSidebarTab('commands')">Commands</button>
                </nav>
              </div>
              <div class="chat-sidebar-panels">
                <div class="chat-sidebar-panel active" data-tab="sessions">
                  <div id="chat-sessions" class="chat-sessions"></div>
                </div>
                <div class="chat-sidebar-panel" data-tab="stats" hidden>
                  <div id="chat-stats-panel" class="chat-stats-panel">
                    <div class="chat-stats-loading">Loading statistics...</div>
                  </div>
                </div>
                <div class="chat-sidebar-panel" data-tab="tools" hidden>
                  <div id="chat-tools-panel" class="chat-tools-panel">
                    <div id="chat-tools-list" class="chat-tools-list">Tools will load automatically.</div>
                  </div>
                </div>
                <div class="chat-sidebar-panel" data-tab="commands" hidden>
                  <div class="chat-commands-list">
                    <div class="chat-command-item"><code>/help</code> - Show available commands</div>
                    <div class="chat-command-item"><code>/tools</code> - List available tools</div>
                    <div class="chat-command-item"><code>/models</code> - Show available models</div>
                    <div class="chat-command-item"><code>/providers</code> - List configured providers</div>
                    <div class="chat-command-item"><code>/clear</code> - Clear conversation history</div>
                    <div class="chat-command-item"><code>/search &lt;query&gt;</code> - Search infrastructure</div>
                    <div class="chat-command-item"><code>/alerts</code> - Get current alerts</div>
                    <div class="chat-command-item"><code>/status</code> - Get system status</div>
                  </div>
                </div>
              </div>
            </aside>
          </div>
        </div>
      </section>

      <!-- Search Page -->
      <section class="page" id="page-search" hidden>
        <div class="panel">
          <h2>Search</h2>
          <div class="toolbar" style="margin: 8px 0 12px">
            <label class="field grow">
              <span>Search</span>
              <input id="search-q" type="text" placeholder="Object name (e.g., device, vm, IP, keyword)" />
            </label>
            <button id="search-run" class="btn">Search</button>
            <div class="spacer"></div>
            <label class="field">
              <span>Zabbix</span>
              <input id="search-zlimit" type="number" min="0" value="10" style="width:80px" />
            </label>
            <label class="field">
              <span>Jira</span>
              <input id="search-jlimit" type="number" min="0" value="10" style="width:80px" />
            </label>
            <label class="field">
              <span>Confluence</span>
              <input id="search-climit" type="number" min="0" value="10" style="width:100px" />
            </label>
            <label class="field">
              <span>vCenter</span>
              <input id="search-vlimit" type="number" min="0" value="10" style="width:90px" />
            </label>
          </div>
          <div id="search-results" class="feed empty">Enter a search term and press Search.</div>
        </div>
      </section>

      <!-- Export Page -->
      <section class="page" id="page-export">
        <div class="panel panel-export">
          <nav class="tabs" id="ds-tabs" aria-label="Datasets">
            <button class="tab active" data-ds="all">All</button>
            <button class="tab" data-ds="devices">Devices</button>
            <button class="tab" data-ds="vms">VMs</button>
          </nav>
          <div class="toolbar">
            <label class="field grow">
              <span>Search</span>
              <input id="q" type="text" placeholder="Search all columns" />
            </label>
            <button id="hideBtn" class="btn" title="Hide fields">üëÅÔ∏è‚Äçüó®Ô∏è Hide fields</button>
            <button id="resetFilters" class="btn ghost" title="Reset all column filters">Reset filters</button>
            <button id="updateBtn" class="btn" title="Run export and refresh">Update dataset</button>
            <button id="viewLogs" class="btn" title="View recent export logs">View logs</button>
            <button id="downloadCsv" class="btn" title="Download filtered CSV">Download CSV</button>
            <label class="field">
              <span>Density</span>
              <select id="density">
                <option value="comfortable" selected>Comfortable</option>
                <option value="compact">Compact</option>
              </select>
            </label>
            <button id="reload" class="btn">Refresh</button>
            <span id="summary" class="summary"></span>
          </div>
          <div class="grid root" id="grid-root">
            <div class="grid header">
              <div class="header-scroll" id="header-scroll">
                <div class="header-rows">
                  <div class="header-row" id="header-row"></div>
                  <div class="filter-row" id="filter-row"></div>
                </div>
              </div>
            </div>
            <div class="grid body" id="body">
              <div class="body-scroll" id="body-scroll">
                <div class="canvas" id="canvas"></div>
                <div class="rows" id="rows"></div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Commvault Page -->
      <section class="page" id="page-commvault" hidden>
        <div class="panel panel-commvault">
          <nav class="tabs" id="commvault-tabs" aria-label="Commvault datasets">
            <button class="tab active" data-commvault-tab="backups">Backups</button>
            <button class="tab" data-commvault-tab="plans">Plans</button>
            <button class="tab" data-commvault-tab="storage">Storage</button>
            <button class="tab" data-commvault-tab="servers">Servers</button>
          </nav>
          <div class="commvault-panel-group">
            <div class="commvault-panel active" data-commvault-panel="backups">
              <div class="commvault-toolbar">
                <div class="commvault-toolbar-overview">
                  <h2 class="commvault-title">Backup Jobs</h2>
                  <span id="commvault-summary" class="commvault-summary">No data loaded.</span>
                </div>
                <div class="commvault-actions">
                  <button id="commvault-refresh" class="btn" type="button">Update data</button>
                </div>
              </div>
              <div class="commvault-filters">
                <label class="field column">
                  <span>Look back</span>
                  <select id="commvault-since">
                    <option value="1">1 hour</option>
                    <option value="3">3 hours</option>
                    <option value="6">6 hours</option>
                    <option value="12">12 hours</option>
                    <option value="24" selected>24 hours</option>
                    <option value="36">36 hours</option>
                    <option value="48">48 hours</option>
                  </select>
                </label>
                <label class="field column commvault-search-field">
                  <span>Search</span>
                  <input id="commvault-search" type="text" placeholder="Filter by job, client, plan‚Ä¶" />
                </label>
              </div>
              <div class="commvault-status-filter" id="commvault-status-filter"></div>
              <div id="commvault-status" class="commvault-status" hidden></div>
              <div class="commvault-table-wrapper">
                <table class="commvault-table compact">
                  <thead>
                    <tr>
                      <th scope="col">Job</th>
                      <th scope="col">Status</th>
                      <th scope="col">Client</th>
                      <th scope="col">Subclient</th>
                      <th scope="col">Plan</th>
                      <th scope="col">Policy</th>
                      <th scope="col">Start</th>
                      <th scope="col">End</th>
                      <th scope="col">Duration</th>
                      <th scope="col">App Size</th>
                      <th scope="col">Media Size</th>
                      <th scope="col">Throughput</th>
                      <th scope="col">Files</th>
                      <th scope="col">Savings</th>
                    </tr>
                  </thead>
                  <tbody id="commvault-table-body">
                    <tr class="empty">
                      <td colspan="14">Commvault backups have not been loaded yet.</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            <div class="commvault-panel" data-commvault-panel="plans" hidden>
              <div class="commvault-toolbar">
                <div class="commvault-toolbar-overview">
                  <h2 class="commvault-title">Plans</h2>
                  <span id="commvault-plans-summary" class="commvault-summary">No plan data loaded.</span>
                </div>
                <div class="commvault-actions">
                  <button id="commvault-plans-refresh" class="btn" type="button">Refresh plans</button>
                </div>
              </div>
              <div class="commvault-filters">
                <label class="field column">
                  <span>Plan type</span>
                  <select id="commvault-plans-type">
                    <option value="all" selected>All plan types</option>
                  </select>
                </label>
              </div>
              <div id="commvault-plans-status" class="commvault-status" hidden></div>
              <div class="commvault-table-wrapper">
                <table class="commvault-table compact commvault-plan-table">
                  <thead>
                    <tr>
                      <th class="plan-name">Plan</th>
                      <th>Type</th>
                      <th>Entities</th>
                      <th>RPO</th>
                      <th>Copies</th>
                      <th>Status</th>
                      <th>Tags</th>
                    </tr>
                  </thead>
                  <tbody id="commvault-plans-table-body">
                    <tr class="empty">
                      <td colspan="7">Commvault plan data not loaded yet.</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

            <div class="commvault-panel" data-commvault-panel="storage" hidden>
              <div class="commvault-toolbar">
                <div class="commvault-toolbar-overview">
                  <h2 class="commvault-title">Storage Pools</h2>
                  <span id="commvault-storage-summary" class="commvault-summary">No storage data loaded.</span>
                </div>
                <div class="commvault-actions">
                  <button id="commvault-storage-refresh" class="btn" type="button">Refresh storage</button>
                </div>
              </div>
              <div id="commvault-storage-status" class="commvault-status" hidden></div>
              <div class="commvault-storage-layout">
                <div class="commvault-table-wrapper">
                  <table class="commvault-table compact commvault-storage-table">
                    <thead>
                      <tr>
                        <th scope="col">Pool</th>
                        <th scope="col">Status</th>
                        <th scope="col">Policy</th>
                        <th scope="col">Region</th>
                        <th scope="col">Capacity</th>
                        <th scope="col">Used</th>
                        <th scope="col">Free</th>
                        <th scope="col">Usage</th>
                        <th scope="col">Dedupe</th>
                        <th scope="col">Nodes</th>
                      </tr>
                    </thead>
                    <tbody id="commvault-storage-table-body">
                      <tr class="empty"><td colspan="10">Storage metrics not loaded yet.</td></tr>
                    </tbody>
                  </table>
                </div>
                <div class="commvault-storage-detail" id="commvault-storage-detail">
                  <p class="commvault-placeholder">Select a storage pool to see detailed metrics.</p>
                </div>
              </div>
            </div>

            <div class="commvault-panel" data-commvault-panel="servers" hidden>
              <div class="commvault-panel-header">
                <div class="commvault-toolbar">
                  <div class="commvault-toolbar-overview">
                    <h2 class="commvault-title">Servers</h2>
                    <span id="commvault-server-summary" class="commvault-summary">Search for a server to view restore points, retention and data reduction metrics.</span>
                  </div>
                  <div class="commvault-actions commvault-server-actions">
                    <button id="commvault-server-refresh" class="btn ghost" type="button">Refresh</button>
                    <div class="commvault-server-export-buttons" id="commvault-server-export-buttons">
                      <button class="btn ghost" data-format="text" type="button">Text</button>
                      <button class="btn ghost" data-format="markdown" type="button">Markdown</button>
                      <button class="btn ghost" data-format="html" type="button">HTML</button>
                      <button class="btn ghost" data-format="docx" type="button">DOCX</button>
                      <button class="btn ghost" data-format="xlsx" type="button">XLSX</button>
                      <button class="btn ghost" data-format="csv" type="button">CSV</button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="commvault-server-search">
                <label class="field column commvault-server-query-field">
                  <span>Server</span>
                  <input id="commvault-server-query" type="text" placeholder="Search by client name or ID" autocomplete="off" />
                </label>
                <button id="commvault-server-search" class="btn" type="button">Search</button>
                <label class="commvault-server-option commvault-server-checkbox">
                  <input id="commvault-server-retained" type="checkbox" checked />
                  <span>Retained only</span>
                </label>
                <label class="field column commvault-server-option">
                  <span>Since</span>
                  <select id="commvault-server-since">
                    <option value="0">All time</option>
                    <option value="24" selected>24 hours</option>
                    <option value="72">72 hours</option>
                    <option value="168">7 days</option>
                    <option value="720">30 days</option>
                  </select>
                </label>
                <label class="field column commvault-server-option">
                  <span>Job limit</span>
                  <input id="commvault-server-limit" type="number" min="0" step="50" value="500" />
                </label>
              </div>
              <div id="commvault-server-suggestions" class="commvault-server-suggestions" hidden></div>
              <div id="commvault-server-status" class="commvault-status" hidden></div>
              <div class="commvault-server-metrics" id="commvault-server-metrics">
                <div class="commvault-server-card">
                  <span class="label">Restore points</span>
                  <span id="commvault-server-metric-count" class="value">‚Äî</span>
                  <span id="commvault-server-metric-window" class="meta"></span>
                </div>
                <div class="commvault-server-card">
                  <span class="label">Application size</span>
                  <span id="commvault-server-metric-app" class="value">‚Äî</span>
                  <span id="commvault-server-metric-app-extra" class="meta"></span>
                </div>
                <div class="commvault-server-card">
                  <span class="label">Media size</span>
                  <span id="commvault-server-metric-media" class="value">‚Äî</span>
                  <span id="commvault-server-metric-media-extra" class="meta"></span>
                </div>
                <div class="commvault-server-card">
                  <span class="label">Average reduction</span>
                  <span id="commvault-server-metric-reduction" class="value">‚Äî</span>
                  <span id="commvault-server-metric-reduction-ratio" class="meta"></span>
                </div>
              </div>
              <div class="commvault-server-secondary">
                <div class="commvault-server-breakdown">
                  <h3>Plans</h3>
                  <ul id="commvault-server-plan" class="commvault-server-breakdown-list">
                    <li class="empty">No data yet.</li>
                  </ul>
                </div>
                <div class="commvault-server-breakdown">
                  <h3>Subclients</h3>
                  <ul id="commvault-server-subclient" class="commvault-server-breakdown-list">
                    <li class="empty">No data yet.</li>
                  </ul>
                </div>
                <div class="commvault-server-breakdown">
                  <h3>Policies</h3>
                  <ul id="commvault-server-policy" class="commvault-server-breakdown-list">
                    <li class="empty">No data yet.</li>
                  </ul>
                </div>
              </div>
              <div class="commvault-server-charts">
                <div class="commvault-server-chart">
                  <div class="commvault-server-chart-header">
                    <h3>Backup size trend</h3>
                    <span id="commvault-server-chart-size-unit" class="meta"></span>
                  </div>
                  <canvas id="commvault-server-chart-size" width="640" height="200"></canvas>
                  <div class="commvault-server-chart-legend">
                    <span class="legend app">Application</span>
                    <span class="legend media">Media</span>
                  </div>
                </div>
                <div class="commvault-server-chart">
                  <div class="commvault-server-chart-header">
                    <h3>Data reduction %</h3>
                  </div>
                  <canvas id="commvault-server-chart-savings" width="640" height="200"></canvas>
                </div>
              </div>
              <div class="commvault-table-wrapper commvault-server-table-wrapper">
                <table class="commvault-table compact commvault-server-table">
                  <thead>
                    <tr>
                      <th scope="col">Job</th>
                      <th scope="col">Status</th>
                      <th scope="col">Plan</th>
                      <th scope="col">Subclient</th>
                      <th scope="col">Start</th>
                      <th scope="col">Retain until</th>
                      <th scope="col">App size</th>
                      <th scope="col">Media size</th>
                      <th scope="col">Savings</th>
                    </tr>
                  </thead>
                  <tbody id="commvault-server-table-body">
                    <tr class="empty"><td colspan="9">Search for a server to see recent restore points.</td></tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Suggestions List Page -->
      <section class="page" id="page-suggestions" hidden>
        <div class="panel panel-suggestions">
          <div class="suggestions-toolbar">
            <h2>Suggestions</h2>
            <div class="spacer"></div>
            <button id="suggestion-new" class="btn" type="button">New Suggestion</button>
          </div>
          <div id="suggestion-list" class="suggestion-list empty"></div>
        </div>
      </section>

      <!-- Suggestion Detail Page -->
      <section class="page" id="page-suggestion-detail" hidden>
        <div class="panel panel-suggestion-detail">
          <div class="suggestion-detail-header">
            <button id="suggestion-back" class="btn ghost" type="button">‚Üê Back to Suggestions</button>
            <div id="suggestion-detail-meta" class="suggestion-detail-meta"></div>
          </div>
          <div class="suggestion-form-grid">
            <div class="suggestion-form-main">
              <label class="field column">
                <span>Title</span>
                <input id="suggestion-title" type="text" placeholder="Title" />
              </label>
              <label class="field column">
                <span>Summary</span>
                <textarea id="suggestion-summary" rows="4" placeholder="Summary"></textarea>
              </label>
              <div class="suggestion-form-row">
                <label class="field column">
                  <span>Classification</span>
                  <select id="suggestion-classification"></select>
                </label>
                <label class="field column">
                  <span>Status</span>
                  <select id="suggestion-status"></select>
                </label>
              </div>
              <div class="suggestion-actions">
                <button id="suggestion-delete" class="btn danger" type="button" hidden>Delete</button>
                <button id="suggestion-save" class="btn" type="button">Save</button>
              </div>
            </div>
            <div id="suggestion-comments-wrapper" class="suggestion-comments">
              <h3>Comments</h3>
              <div class="suggestion-comment-compose">
                <textarea id="suggestion-comment-text" rows="3" placeholder="Add a comment..."></textarea>
                <button id="suggestion-comment-add" class="btn" type="button">Comment</button>
              </div>
              <div id="suggestion-comments" class="suggestion-comment-list empty"></div>
            </div>
          </div>
        </div>
      </section>

      <!-- Account Page -->
      <section class="page" id="page-account" hidden>
        <div class="panel panel-account">
          <div class="account-header">
            <div>
              <h2>My Account</h2>
              <p id="account-subtitle" class="account-subtitle"></p>
            </div>
          </div>
          <nav class="account-tabs" id="account-tabs">
            <button class="account-tab active" data-account-tab="profile">Profile</button>
            <button class="account-tab" data-account-tab="preferences">Preferences</button>
            <button class="account-tab" data-account-tab="password">Password</button>
            <button class="account-tab" data-account-tab="tokens">API Tokens</button>
          </nav>
          <div class="account-panels">
            <section class="account-panel active" data-account-panel="profile">
              <form id="account-profile-form" class="account-form">
                <div class="field column">
                  <span>Display name</span>
                  <input id="account-profile-display" type="text" placeholder="Your name" />
                </div>
                <div class="field column">
                  <span>Email</span>
                  <input id="account-profile-email" type="email" placeholder="you@example.com" />
                </div>
                <div class="account-actions">
                  <button id="account-profile-save" type="submit" class="btn">Save changes</button>
                  <span id="account-profile-status" class="form-status" role="status"></span>
                </div>
              </form>
            </section>
            <section class="account-panel" data-account-panel="preferences">
              <div class="account-preferences">
                <div class="account-preference-item">
                  <h3>Theme</h3>
                  <p>Use the theme selector in the header to switch between available themes. Your choice is remembered per browser.</p>
                  <div id="account-theme-mount"></div>
                </div>
                <div class="account-preference-item">
                  <h3>Export page defaults</h3>
                  <label class="field column">
                    <span>Default dataset tab</span>
                    <select id="account-pref-dataset">
                      <option value="all">All</option>
                      <option value="devices">Devices</option>
                      <option value="vms">VMs</option>
                    </select>
                  </label>
                </div>
              </div>
            </section>
            <section class="account-panel" data-account-panel="password">
              <form id="account-password-form" class="account-form">
                <div class="field column">
                  <span>Current password</span>
                  <input id="account-password-current" type="password" autocomplete="current-password" placeholder="Current password" />
                </div>
                <div class="field column">
                  <span>New password</span>
                  <input id="account-password-new" type="password" autocomplete="new-password" placeholder="New password" required />
                  <small>Minimum 8 characters.</small>
                </div>
                <div class="account-actions">
                  <button id="account-password-save" type="submit" class="btn">Update password</button>
                  <span id="account-password-status" class="form-status" role="status"></span>
                </div>
              </form>
            </section>
            <section class="account-panel" data-account-panel="tokens">
              <div class="account-token-panel">
                <div class="account-token-list" id="account-api-list"></div>
                <form id="account-api-form" class="account-form account-token-form">
                  <h3>Override provider key</h3>
                  <div class="account-token-grid">
                    <label class="field column">
                      <span>Provider</span>
                      <select id="account-api-provider"></select>
                    </label>
                    <label class="field column">
                      <span>Label (optional)</span>
                      <input id="account-api-label" type="text" placeholder="My dedicated key" />
                    </label>
                  </div>
                  <label class="field column">
                    <span>API key / token</span>
                    <textarea id="account-api-secret" rows="3" placeholder="Paste secret..."></textarea>
                  </label>
                  <div class="account-actions">
                    <button id="account-api-save" type="submit" class="btn">Save key</button>
                    <span id="account-api-status" class="form-status" role="status"></span>
                  </div>
                </form>
              </div>
            </section>
          </div>
        </div>
      </section>

      <!-- Admin Page -->
      <section class="page" id="page-admin" hidden>
        <div class="panel panel-admin">
          <div class="admin-header">
            <h2>Admin Settings</h2>
            <span id="admin-status" class="admin-status"></span>
          </div>
          <nav class="admin-tabs" id="admin-tabs">
            <button class="admin-tab active" data-admin-tab="zabbix">Zabbix</button>
            <button class="admin-tab" data-admin-tab="net-atlassian">NetBox &amp; Atlassian</button>
            <button class="admin-tab" data-admin-tab="export">Export</button>
            <button class="admin-tab" data-admin-tab="api">API &amp; UI</button>
            <button class="admin-tab" data-admin-tab="ai">AI Chat</button>
            <button class="admin-tab" data-admin-tab="vcenter">vCenter</button>
            <button class="admin-tab" data-admin-tab="foreman">Foreman</button>
            <button class="admin-tab" data-admin-tab="puppet">Puppet</button>
            <button class="admin-tab" data-admin-tab="users">Users</button>
            <button class="admin-tab" data-admin-tab="suggestions">Suggestions</button>
            <button class="admin-tab" data-admin-tab="backup">Backup</button>
            <button class="admin-tab" data-admin-tab="ai-usage">AI Usage</button>
            <button class="admin-tab" data-admin-tab="ai-activity">API Activity</button>
          </nav>
          <div id="admin-settings" class="admin-panels">
            <section id="admin-panel-zabbix" class="admin-panel active" data-admin-tab="zabbix">
              <div id="admin-settings-zabbix" class="admin-settings-group"></div>
            </section>
            <section id="admin-panel-net" class="admin-panel" data-admin-tab="net-atlassian">
              <div id="admin-settings-net" class="admin-settings-group"></div>
            </section>
            <section id="admin-panel-export" class="admin-panel" data-admin-tab="export">
              <div id="admin-settings-export" class="admin-settings-group"></div>
            </section>
            <section id="admin-panel-api" class="admin-panel" data-admin-tab="api">
              <div id="admin-settings-api" class="admin-settings-group"></div>
            </section>
            <section id="admin-panel-ai" class="admin-panel" data-admin-tab="ai">
              <div class="admin-ai-section">
                <!-- Default Chat Settings -->
                <div class="admin-ai-defaults">
                  <h3>Default Chat Settings</h3>
                  <p class="admin-hint">Configure default parameters for AI chat. These can be overridden per conversation.</p>
                  
                  <div class="admin-ai-defaults-grid">
                    <label class="field column">
                      <span>Default Provider</span>
                      <select id="admin-ai-default-provider">
                        <option value="openrouter">OpenRouter</option>
                        <option value="azure_openai">Azure OpenAI</option>
                        <option value="openai">OpenAI</option>
                        <option value="anthropic">Anthropic</option>
                        <option value="gemini">Google Gemini</option>
                      </select>
                    </label>
                    
                    <label class="field column">
                      <span>Max Tokens</span>
                      <input id="admin-ai-max-tokens" type="number" min="100" max="128000" step="100" value="16384" placeholder="16384" />
                      <small>Maximum response length (100-128000)</small>
                    </label>
                    
                    <label class="field column">
                      <span>Temperature</span>
                      <input id="admin-ai-temperature" type="number" min="0" max="2" step="0.1" value="0.7" placeholder="0.7" />
                      <small>Creativity (0 = focused, 2 = creative)</small>
                    </label>
                    
                    <label class="field column">
                      <span>System Prompt</span>
                      <textarea id="admin-ai-system-prompt" rows="3" placeholder="Optional: Custom instructions for the AI assistant..."></textarea>
                    </label>
                    
                    <div class="admin-ai-toggles">
                      <label class="toggle-field">
                        <input id="admin-ai-tools-enabled" type="checkbox" checked />
                        <span>Enable Tool Calling</span>
                        <small>Allow AI to use Atlas tools (search, export, etc.)</small>
                      </label>
                      
                      <label class="toggle-field">
                        <input id="admin-ai-streaming-enabled" type="checkbox" checked />
                        <span>Enable Streaming</span>
                        <small>Stream responses in real-time</small>
                      </label>
                    </div>
                  </div>
                  
                  <div class="admin-ai-actions" style="margin-top: 12px;">
                    <button id="admin-ai-defaults-save" class="btn" type="button">Save Defaults</button>
                    <button id="admin-ai-defaults-reset" class="btn ghost" type="button">Reset to Defaults</button>
                    <span id="admin-ai-defaults-status" class="admin-ai-status"></span>
                  </div>
                </div>

                <hr class="admin-ai-divider" />

                <h3>AI Provider Configuration</h3>
                <p class="admin-hint">Configure API keys for AI chat providers. Keys are stored securely and used for chat completions.</p>
                
                <div class="admin-ai-providers" id="admin-ai-providers">
                  <!-- Azure OpenAI -->
                  <div class="admin-ai-provider" data-provider="azure_openai">
                    <div class="admin-ai-provider-header">
                      <h4>Azure OpenAI</h4>
                      <span id="admin-ai-azure-status" class="admin-ai-status"></span>
                    </div>
                    <div class="admin-ai-provider-form">
                      <label class="field column">
                        <span>API Key</span>
                        <input id="admin-ai-azure-key" type="password" placeholder="Azure OpenAI API Key" />
                      </label>
                      <label class="field column">
                        <span>Endpoint</span>
                        <input id="admin-ai-azure-endpoint" type="url" placeholder="https://your-resource.openai.azure.com/" />
                      </label>
                      <label class="field column">
                        <span>Deployment Name</span>
                        <input id="admin-ai-azure-deployment" type="text" placeholder="gpt-4o-mini" />
                      </label>
                      <div class="admin-ai-actions">
                        <button id="admin-ai-azure-save" class="btn" type="button">Save</button>
                        <button id="admin-ai-azure-test" class="btn ghost" type="button">Test</button>
                      </div>
                    </div>
                  </div>

                  <!-- OpenRouter -->
                  <div class="admin-ai-provider" data-provider="openrouter">
                    <div class="admin-ai-provider-header">
                      <h4>OpenRouter</h4>
                      <span id="admin-ai-openrouter-status" class="admin-ai-status"></span>
                    </div>
                    <div class="admin-ai-provider-form">
                      <label class="field column">
                        <span>API Key</span>
                        <input id="admin-ai-openrouter-key" type="password" placeholder="OpenRouter API Key (sk-or-...)" />
                      </label>
                      <label class="field column">
                        <span>Default Model</span>
                        <select id="admin-ai-openrouter-model">
                          <option value="openai/gpt-5-mini">GPT-5 Mini</option>
                          <option value="openai/gpt-5-nano">GPT-5 Nano</option>
                          <option value="openai/gpt-5.2">GPT-5.2</option>
                          <option value="openai/gpt-4o-mini">GPT-4o Mini</option>
                          <option value="openai/gpt-4o">GPT-4o</option>
                          <option value="openai/gpt-oss-120b">GPT-OSS 120B</option>
                          <option value="anthropic/claude-opus-4.5">Claude Opus 4.5</option>
                          <option value="anthropic/claude-sonnet-4.5">Claude Sonnet 4.5</option>
                          <option value="anthropic/claude-haiku-4.5">Claude Haiku 4.5</option>
                          <option value="anthropic/claude-sonnet-4">Claude Sonnet 4</option>
                          <option value="anthropic/claude-3.5-sonnet">Claude 3.5 Sonnet</option>
                          <option value="anthropic/claude-3.5-haiku">Claude 3.5 Haiku</option>
                          <option value="google/gemini-2.5-flash">Gemini 2.5 Flash</option>
                          <option value="google/gemini-pro-1.5">Gemini 1.5 Pro</option>
                          <option value="google/gemini-flash-1.5">Gemini 1.5 Flash</option>
                          <option value="x-ai/grok-4.1-fast">Grok 4.1 Fast</option>
                          <option value="meta-llama/llama-3.1-70b-instruct">Llama 3.1 70B</option>
                          <option value="mistralai/mistral-large">Mistral Large</option>
                          <option value="deepseek/deepseek-v3.2">DeepSeek v3.2</option>
                          <option value="deepseek/deepseek-chat">DeepSeek Chat</option>
                        </select>
                      </label>
                      <div class="admin-ai-actions">
                        <button id="admin-ai-openrouter-save" class="btn" type="button">Save</button>
                        <button id="admin-ai-openrouter-test" class="btn ghost" type="button">Test</button>
                      </div>
                    </div>
                  </div>

                  <!-- OpenAI -->
                  <div class="admin-ai-provider" data-provider="openai">
                    <div class="admin-ai-provider-header">
                      <h4>OpenAI</h4>
                      <span id="admin-ai-openai-status" class="admin-ai-status"></span>
                    </div>
                    <div class="admin-ai-provider-form">
                      <label class="field column">
                        <span>API Key</span>
                        <input id="admin-ai-openai-key" type="password" placeholder="OpenAI API Key (sk-...)" />
                      </label>
                      <label class="field column">
                        <span>Default Model</span>
                        <select id="admin-ai-openai-model">
                          <option value="gpt-4o-mini">GPT-4o Mini</option>
                          <option value="gpt-4o">GPT-4o</option>
                          <option value="gpt-4-turbo">GPT-4 Turbo</option>
                          <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
                        </select>
                      </label>
                      <div class="admin-ai-actions">
                        <button id="admin-ai-openai-save" class="btn" type="button">Save</button>
                        <button id="admin-ai-openai-test" class="btn ghost" type="button">Test</button>
                      </div>
                    </div>
                  </div>

                  <!-- Anthropic -->
                  <div class="admin-ai-provider" data-provider="anthropic">
                    <div class="admin-ai-provider-header">
                      <h4>Anthropic (Claude)</h4>
                      <span id="admin-ai-anthropic-status" class="admin-ai-status"></span>
                    </div>
                    <div class="admin-ai-provider-form">
                      <label class="field column">
                        <span>API Key</span>
                        <input id="admin-ai-anthropic-key" type="password" placeholder="Anthropic API Key" />
                      </label>
                      <label class="field column">
                        <span>Default Model</span>
                        <select id="admin-ai-anthropic-model">
                          <option value="claude-3-5-sonnet-20241022">Claude 3.5 Sonnet</option>
                          <option value="claude-3-5-haiku-20241022">Claude 3.5 Haiku</option>
                          <option value="claude-3-opus-20240229">Claude 3 Opus</option>
                        </select>
                      </label>
                      <div class="admin-ai-actions">
                        <button id="admin-ai-anthropic-save" class="btn" type="button">Save</button>
                        <button id="admin-ai-anthropic-test" class="btn ghost" type="button">Test</button>
                      </div>
                    </div>
                  </div>

                  <!-- Google Gemini -->
                  <div class="admin-ai-provider" data-provider="gemini">
                    <div class="admin-ai-provider-header">
                      <h4>Google Gemini</h4>
                      <span id="admin-ai-gemini-status" class="admin-ai-status"></span>
                    </div>
                    <div class="admin-ai-provider-form">
                      <label class="field column">
                        <span>API Key</span>
                        <input id="admin-ai-gemini-key" type="password" placeholder="Google AI API Key" />
                      </label>
                      <label class="field column">
                        <span>Default Model</span>
                        <select id="admin-ai-gemini-model">
                          <option value="gemini-1.5-flash">Gemini 1.5 Flash</option>
                          <option value="gemini-1.5-pro">Gemini 1.5 Pro</option>
                          <option value="gemini-pro">Gemini Pro</option>
                        </select>
                      </label>
                      <div class="admin-ai-actions">
                        <button id="admin-ai-gemini-save" class="btn" type="button">Save</button>
                        <button id="admin-ai-gemini-test" class="btn ghost" type="button">Test</button>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="admin-ai-info">
                  <h4>Quick Setup</h4>
                  <p>Get API keys from:</p>
                  <ul>
                    <li><a href="https://openrouter.ai/keys" target="_blank" rel="noopener">OpenRouter</a> - Access multiple models with one key</li>
                    <li><a href="https://platform.openai.com/api-keys" target="_blank" rel="noopener">OpenAI</a> - GPT-4, GPT-4o models</li>
                    <li><a href="https://console.anthropic.com/" target="_blank" rel="noopener">Anthropic</a> - Claude models</li>
                    <li><a href="https://aistudio.google.com/apikey" target="_blank" rel="noopener">Google AI Studio</a> - Gemini models</li>
                  </ul>
                </div>
              </div>
            </section>
            <section id="admin-panel-vcenter" class="admin-panel" data-admin-tab="vcenter">
              <div class="admin-vcenter-header">
                <button id="admin-vcenter-add" class="btn" type="button" title="Add vCenter">Ôºã Add vCenter</button>
                <span id="admin-vcenter-status" class="form-status"></span>
              </div>
              <div id="admin-vcenter-list" class="admin-vcenter-list"></div>
              <form id="admin-vcenter-form" class="account-form hidden">
                <input id="admin-vcenter-id" type="hidden" />
                <h3 id="admin-vcenter-form-title">vCenter</h3>
                <label class="field column">
                  <span>Name</span>
                  <input id="admin-vcenter-name" type="text" placeholder="Production vCenter" required />
                </label>
                <label class="field column">
                  <span>Base URL</span>
                  <input id="admin-vcenter-base-url" type="url" placeholder="https://vcenter.example.com" required />
                </label>
                <label class="field column">
                  <span>Username</span>
                  <input id="admin-vcenter-username" type="text" placeholder="svc_vcenter" required />
                </label>
                <label class="field column">
                  <span>Password</span>
                  <input id="admin-vcenter-password" type="password" placeholder="Enter password" />
                  <small id="admin-vcenter-password-help">Leave blank to keep the current password.</small>
                </label>
                <label class="field">
                  <input id="admin-vcenter-verify-ssl" type="checkbox" checked />
                  <span>Verify TLS certificates</span>
                </label>
                <div class="account-actions">
                  <button id="admin-vcenter-save" type="submit" class="btn">Save vCenter</button>
                  <button id="admin-vcenter-cancel" type="button" class="btn ghost">Cancel</button>
                  <span id="admin-vcenter-form-status" class="form-status"></span>
                </div>
              </form>
            </section>
            <section id="admin-panel-foreman" class="admin-panel" data-admin-tab="foreman">
              <div class="admin-vcenter-header">
                <button id="admin-foreman-add" class="btn" type="button" title="Add Foreman Instance">Ôºã Add Foreman</button>
                <span id="admin-foreman-status" class="form-status"></span>
              </div>
              <div id="admin-foreman-list" class="admin-vcenter-list"></div>
              <form id="admin-foreman-form" class="account-form hidden">
                <input id="admin-foreman-id" type="hidden" />
                <h3 id="admin-foreman-form-title">Foreman Instance</h3>
                <label class="field column">
                  <span>Name</span>
                  <input id="admin-foreman-name" type="text" placeholder="Production Foreman" required />
                </label>
                <label class="field column">
                  <span>Base URL</span>
                  <input id="admin-foreman-base-url" type="url" placeholder="https://foreman.example.com" required />
                </label>
                <label class="field column">
                  <span>Username</span>
                  <input id="admin-foreman-username" type="text" placeholder="api_user" required />
                </label>
                <label class="field column">
                  <span>Personal Access Token</span>
                  <input id="admin-foreman-token" type="password" placeholder="Enter token" />
                  <small id="admin-foreman-token-help">Leave blank to keep the current token.</small>
                </label>
                <label class="field">
                  <input id="admin-foreman-verify-ssl" type="checkbox" checked />
                  <span>Verify TLS certificates</span>
                </label>
                <div class="account-actions">
                  <button id="admin-foreman-save" type="submit" class="btn">Save Foreman</button>
                  <button id="admin-foreman-test" type="button" class="btn ghost">Test Connection</button>
                  <button id="admin-foreman-cancel" type="button" class="btn ghost">Cancel</button>
                  <span id="admin-foreman-form-status" class="form-status"></span>
                </div>
              </form>
            </section>
            <section id="admin-panel-puppet" class="admin-panel" data-admin-tab="puppet">
              <div class="admin-puppet-header">
                <button id="admin-puppet-add" class="btn" type="button" title="Add Puppet Repository">Ôºã Add Puppet Repo</button>
                <span id="admin-puppet-status" class="form-status"></span>
              </div>
              <div id="admin-puppet-list" class="admin-puppet-list"></div>
              <form id="admin-puppet-form" class="account-form hidden">
                <input id="admin-puppet-id" type="hidden" />
                <h3 id="admin-puppet-form-title">Puppet Repository</h3>
                <label class="field column">
                  <span>Name</span>
                  <input id="admin-puppet-name" type="text" placeholder="Puppet" required />
                </label>
                <label class="field column">
                  <span>Git Remote URL</span>
                  <input id="admin-puppet-remote-url" type="text" placeholder="git@gitlab.com:org/puppet.git" required />
                </label>
                <label class="field column">
                  <span>Branch</span>
                  <input id="admin-puppet-branch" type="text" placeholder="production" value="production" />
                </label>
                <label class="field column">
                  <span>SSH Key Path (optional)</span>
                  <input id="admin-puppet-ssh-key" type="text" placeholder="~/.ssh/id_rsa" />
                  <small>Path to SSH private key for Git authentication. Leave blank for default SSH agent.</small>
                </label>
                <div class="account-actions">
                  <button id="admin-puppet-save" type="submit" class="btn">Save Puppet Config</button>
                  <button id="admin-puppet-cancel" type="button" class="btn ghost">Cancel</button>
                  <span id="admin-puppet-form-status" class="form-status"></span>
                </div>
              </form>
            </section>
            <section id="admin-panel-users" class="admin-panel" data-admin-tab="users">
              <div class="admin-users-header">
                <div class="admin-users-actions">
                  <button id="admin-user-refresh" class="btn ghost" type="button">Refresh</button>
                  <label class="field">
                    <input id="admin-user-include-inactive" type="checkbox" />
                    <span>Show inactive</span>
                  </label>
                  <span id="admin-user-status" class="form-status"></span>
                </div>
                <button id="admin-user-create" class="btn" type="button">New user</button>
              </div>
              <div class="admin-users-layout">
                <div class="admin-user-list" id="admin-user-list"></div>
                <div class="admin-user-detail" id="admin-user-detail">
                  <div id="admin-user-empty" class="account-empty">Select a user to view details.</div>
                  <form id="admin-user-form" class="account-form hidden">
                    <h3 id="admin-user-form-title">User</h3>
                    <div class="field column">
                      <span>Username</span>
                      <input id="admin-user-username" type="text" readonly />
                    </div>
                  <div class="field column">
                    <span>Display name</span>
                    <input id="admin-user-display" type="text" placeholder="Name" />
                  </div>
                  <div class="field column">
                    <span>Email</span>
                    <input id="admin-user-email" type="email" placeholder="user@example.com" />
                  </div>
                  <div class="field column create-only" id="admin-user-new-password-row">
                    <span>Initial password</span>
                    <input id="admin-user-new-password" type="password" placeholder="Set a password" />
                  </div>
                    <label class="field column">
                      <span>Role</span>
                      <select id="admin-user-role">
                        <option value="member">Member</option>
                        <option value="admin">Admin</option>
                      </select>
                    </label>
                    <label class="field">
                      <input id="admin-user-active" type="checkbox" />
                      <span>Active</span>
                    </label>
                    <div class="account-actions">
                      <button id="admin-user-save" type="submit" class="btn">Save user</button>
                      <span id="admin-user-form-status" class="form-status"></span>
                    </div>
                  </form>
                  <form id="admin-user-password-form" class="account-form hidden">
                    <h3>Reset password</h3>
                    <div class="field column">
                      <span>New password</span>
                      <input id="admin-user-password" type="password" placeholder="New password" />
                    </div>
                    <div class="account-actions">
                      <button id="admin-user-password-save" type="submit" class="btn ghost">Set password</button>
                      <span id="admin-user-password-status" class="form-status"></span>
                    </div>
                  </form>
                  <button id="admin-user-delete" class="btn danger hidden" type="button">Delete user</button>
                </div>
              </div>
              <div class="admin-global-keys">
                <div class="admin-users-header">
                  <h3>Global API Keys</h3>
                  <div class="admin-users-actions">
                    <button id="admin-global-add" class="btn ghost" type="button">Add key</button>
                    <span id="admin-global-status" class="form-status"></span>
                  </div>
                </div>
                <div id="admin-global-list" class="account-token-list"></div>
                <form id="admin-global-form" class="account-form hidden">
                  <div class="account-token-grid">
                    <label class="field column">
                      <span>Provider</span>
                      <select id="admin-global-provider"></select>
                    </label>
                    <label class="field column">
                      <span>Label (optional)</span>
                      <input id="admin-global-label" type="text" placeholder="Default key" />
                    </label>
                  </div>
                  <label class="field column">
                    <span>Secret</span>
                    <textarea id="admin-global-secret" rows="3" placeholder="Paste API key"></textarea>
                  </label>
                  <div class="account-actions">
                    <button id="admin-global-save" type="submit" class="btn">Save global key</button>
                    <button id="admin-global-cancel" type="button" class="btn ghost">Cancel</button>
                  </div>
                </form>
              </div>
              <div class="admin-role-manager">
                <div class="admin-users-header">
                  <h3>Role Permissions</h3>
                  <span id="admin-role-status" class="form-status"></span>
                </div>
                <div id="admin-role-list" class="admin-role-list"></div>
              </div>
            </section>
            <section id="admin-panel-suggestions" class="admin-panel" data-admin-tab="suggestions">
              <div id="admin-settings-suggestions" class="admin-settings-group"></div>
              <div class="admin-suggestions-config">
                <h3>Suggestions Database</h3>
                <div class="admin-suggestions-status" id="admin-suggestions-status"></div>
                <div class="admin-suggestions-info">
                  <div class="info-row">
                    <span class="label">Current Backend:</span>
                    <span id="admin-suggestions-backend" class="value">‚Äî</span>
                  </div>
                  <div class="info-row">
                    <span class="label">Airtable Configured:</span>
                    <span id="admin-suggestions-airtable-status" class="value">‚Äî</span>
                  </div>
                  <div class="info-row" id="admin-suggestions-base-row" hidden>
                    <span class="label">Airtable Base ID:</span>
                    <span id="admin-suggestions-base-id" class="value">‚Äî</span>
                  </div>
                  <div class="info-row" id="admin-suggestions-table-row" hidden>
                    <span class="label">Airtable Table:</span>
                    <span id="admin-suggestions-table-name" class="value">‚Äî</span>
                  </div>
                  <div class="info-row">
                    <span class="label">Cache TTL:</span>
                    <span id="admin-suggestions-cache-ttl" class="value">‚Äî</span>
                  </div>
                </div>
                <div class="admin-suggestions-actions">
                  <button id="admin-suggestions-migrate" class="btn" type="button">
                    Migrate CSV ‚Üí Airtable
                  </button>
                  <span id="admin-suggestions-migrate-status" class="form-status"></span>
                </div>
                <p class="admin-hint">
                  Configure your Airtable Personal Access Token (PAT) and Base ID above, then click
                  "Migrate CSV ‚Üí Airtable" to transfer existing suggestions. Set <code>SUGGESTIONS_BACKEND</code>
                  to <code>airtable</code> to force using Airtable, or leave empty for auto-detection.
                </p>
              </div>
            </section>
            <section id="admin-panel-backup" class="admin-panel" data-admin-tab="backup">
              <div id="admin-settings-backup" class="admin-settings-group"></div>
              
              <!-- Backup Status -->
              <div class="admin-backup-overview">
                <h3>Backup Status</h3>
                <div class="backup-status-grid">
                  <div class="backup-status-item">
                    <span class="label">Type:</span>
                    <span id="backup-config-type" class="value">‚Äî</span>
                  </div>
                  <div class="backup-status-item">
                    <span class="label">Encryption:</span>
                    <span id="backup-config-encryption" class="value">‚Äî</span>
                  </div>
                  <div class="backup-status-item">
                    <span class="label">Status:</span>
                    <span id="backup-config-status" class="value">‚Äî</span>
                  </div>
                </div>
              </div>

              <!-- Create Backup -->
              <div class="admin-backup-actions">
                <h3>Create Backup</h3>
                <p class="admin-hint">
                  Creates an encrypted archive of all application data (.env, database, exports, configurations).
                  The backup can be restored after upgrades or on a new installation.
                </p>
                <div class="backup-action-row">
                  <button id="admin-backup-create" class="btn" type="button">
                    üîí Create Encrypted Backup
                  </button>
                  <span id="admin-backup-create-status" class="form-status"></span>
                </div>
              </div>

              <!-- Backup List -->
              <div class="admin-backup-list-section">
                <h3>Available Backups</h3>
                <div id="admin-backup-list" class="admin-backup-list">
                  <div class="backup-list-loading">Loading backups‚Ä¶</div>
                </div>
                <button id="admin-backup-refresh" class="btn ghost" type="button">‚Üª Refresh List</button>
              </div>

              <!-- Restore Backup -->
              <div class="admin-backup-restore-section">
                <h3>Restore Backup</h3>
                <p class="admin-hint">
                  Select a backup from the list above, or enter a filename manually.
                  Use "Preview" to see what will be restored before applying.
                </p>
                <div class="restore-form">
                  <label class="field column">
                    <span>Backup Filename</span>
                    <input id="admin-restore-filename" type="text" placeholder="atlas_backup_20250101_120000.enc" />
                  </label>
                  <label class="field column">
                    <span>Decryption Password (optional if using configured password)</span>
                    <input id="admin-restore-password" type="password" placeholder="Leave empty to use configured password" />
                  </label>
                  <div class="restore-actions">
                    <button id="admin-restore-preview" class="btn ghost" type="button">üëÅ Preview</button>
                    <button id="admin-restore-run" class="btn" type="button">üì• Restore Backup</button>
                    <span id="admin-restore-status" class="form-status"></span>
                  </div>
                </div>
              </div>

              <hr style="margin: 2rem 0; border: none; border-top: 1px solid var(--border-color);" />

              <!-- Export Section (Portable Data) -->
              <div class="admin-backup-actions">
                <h3>üì¶ Create Export (Portable Data)</h3>
                <p class="admin-hint">
                  Creates an encrypted archive of application data <strong>without server-specific configuration</strong>.
                  Exports include the database and data files but exclude <code>.env</code> files.
                  Safe to import on any server without overwriting its configuration.
                </p>
                <div class="backup-action-row">
                  <button id="admin-export-create" class="btn" type="button">
                    üì¶ Create Export
                  </button>
                  <span id="admin-export-create-status" class="form-status"></span>
                </div>
              </div>

              <!-- Export List -->
              <div class="admin-backup-list-section">
                <h3>Available Exports</h3>
                <div id="admin-export-list" class="admin-backup-list">
                  <div class="backup-list-loading">Loading exports‚Ä¶</div>
                </div>
                <button id="admin-export-refresh" class="btn ghost" type="button">‚Üª Refresh List</button>
              </div>

              <!-- Import Export -->
              <div class="admin-backup-restore-section">
                <h3>Import Export</h3>
                <p class="admin-hint">
                  Import data from an export file. This will <strong>not</strong> overwrite your
                  server's <code>.env</code> or other server-specific configuration.
                </p>
                <div class="restore-form">
                  <label class="field column">
                    <span>Export Filename</span>
                    <input id="admin-import-filename" type="text" placeholder="atlas_export_20250101_120000.zip" />
                  </label>
                  <label class="field column">
                    <span>Decryption Password (optional if using configured password)</span>
                    <input id="admin-import-password" type="password" placeholder="Leave empty to use configured password" />
                  </label>
                  <div class="restore-actions">
                    <button id="admin-import-preview" class="btn ghost" type="button">üëÅ Preview</button>
                    <button id="admin-import-run" class="btn" type="button">üì• Import Export</button>
                    <span id="admin-import-status" class="form-status"></span>
                  </div>
                </div>
              </div>
            </section>

            <!-- AI Usage Panel -->
            <section id="admin-panel-ai-usage" class="admin-panel" data-admin-tab="ai-usage">
              <div class="admin-ai-usage">
                <h3>AI Usage Dashboard</h3>
                <p class="admin-hint">Monitor API usage, costs, and manage model configurations.</p>

                <!-- Usage Stats Summary -->
                <div class="ai-usage-summary">
                  <div class="ai-usage-cards" id="ai-usage-cards">
                    <div class="ai-usage-card">
                      <span class="card-label">Today</span>
                      <span class="card-value" id="ai-usage-today-cost">$0.00</span>
                      <span class="card-detail" id="ai-usage-today-requests">0 requests</span>
                    </div>
                    <div class="ai-usage-card">
                      <span class="card-label">This Week</span>
                      <span class="card-value" id="ai-usage-week-cost">$0.00</span>
                      <span class="card-detail" id="ai-usage-week-requests">0 requests</span>
                    </div>
                    <div class="ai-usage-card">
                      <span class="card-label">This Month</span>
                      <span class="card-value" id="ai-usage-month-cost">$0.00</span>
                      <span class="card-detail" id="ai-usage-month-requests">0 requests</span>
                    </div>
                    <div class="ai-usage-card">
                      <span class="card-label">Total</span>
                      <span class="card-value" id="ai-usage-total-cost">$0.00</span>
                      <span class="card-detail" id="ai-usage-total-requests">0 requests</span>
                    </div>
                  </div>
                </div>

                <!-- Top Models -->
                <div class="ai-usage-top-models">
                  <h4>Top Models (Last 30 Days)</h4>
                  <table class="ai-usage-table" id="ai-usage-top-models-table">
                    <thead>
                      <tr>
                        <th>Provider</th>
                        <th>Model</th>
                        <th>Requests</th>
                        <th>Tokens</th>
                        <th>Cost</th>
                      </tr>
                    </thead>
                    <tbody id="ai-usage-top-models-body">
                      <tr><td colspan="5" class="loading">Loading...</td></tr>
                    </tbody>
                  </table>
                </div>

                <hr class="admin-ai-divider" />

                <!-- Model Configuration -->
                <div class="ai-model-config">
                  <div class="ai-model-config-header">
                    <h4>Custom Model Configurations</h4>
                    <button id="ai-model-add" class="btn" type="button">+ Add Model</button>
                  </div>
                  <p class="admin-hint">Override pricing or configure custom models. These settings take priority over built-in pricing.</p>

                  <table class="ai-usage-table" id="ai-model-config-table">
                    <thead>
                      <tr>
                        <th>Provider</th>
                        <th>Model ID</th>
                        <th>Input $/1M</th>
                        <th>Output $/1M</th>
                        <th>Status</th>
                        <th>Actions</th>
                      </tr>
                    </thead>
                    <tbody id="ai-model-config-body">
                      <tr><td colspan="6" class="empty">No custom configurations. Using built-in pricing.</td></tr>
                    </tbody>
                  </table>
                </div>

                <!-- Add/Edit Model Form -->
                <div id="ai-model-form-container" class="ai-model-form hidden">
                  <h4 id="ai-model-form-title">Add Model Configuration</h4>
                  <form id="ai-model-form">
                    <input type="hidden" id="ai-model-id" />
                    <div class="ai-model-form-grid">
                      <label class="field column">
                        <span>Provider</span>
                        <select id="ai-model-provider" required>
                          <option value="openrouter">OpenRouter</option>
                          <option value="openai">OpenAI</option>
                          <option value="anthropic">Anthropic</option>
                          <option value="azure_openai">Azure OpenAI</option>
                          <option value="gemini">Google Gemini</option>
                        </select>
                      </label>
                      <label class="field column">
                        <span>Model ID</span>
                        <input id="ai-model-model-id" type="text" placeholder="openai/gpt-4o-mini" required />
                      </label>
                      <label class="field column">
                        <span>Display Name (optional)</span>
                        <input id="ai-model-display-name" type="text" placeholder="GPT-4o Mini" />
                      </label>
                      <label class="field column">
                        <span>Input Price ($/1M tokens)</span>
                        <input id="ai-model-price-input" type="number" step="0.001" min="0" value="0" />
                      </label>
                      <label class="field column">
                        <span>Output Price ($/1M tokens)</span>
                        <input id="ai-model-price-output" type="number" step="0.001" min="0" value="0" />
                      </label>
                      <label class="field column">
                        <span>Context Window</span>
                        <input id="ai-model-context" type="number" min="0" placeholder="128000" />
                      </label>
                    </div>
                    <div class="ai-model-toggles">
                      <label class="toggle-field">
                        <input id="ai-model-active" type="checkbox" checked />
                        <span>Active</span>
                      </label>
                      <label class="toggle-field">
                        <input id="ai-model-preferred" type="checkbox" />
                        <span>Preferred</span>
                      </label>
                      <label class="toggle-field">
                        <input id="ai-model-tools" type="checkbox" checked />
                        <span>Supports Tools</span>
                      </label>
                      <label class="toggle-field">
                        <input id="ai-model-streaming" type="checkbox" checked />
                        <span>Supports Streaming</span>
                      </label>
                      <label class="toggle-field">
                        <input id="ai-model-vision" type="checkbox" />
                        <span>Supports Vision</span>
                      </label>
                    </div>
                    <div class="ai-model-actions">
                      <button type="button" id="ai-model-lookup" class="btn ghost">Lookup Pricing</button>
                      <button type="submit" class="btn">Save</button>
                      <button type="button" id="ai-model-cancel" class="btn ghost">Cancel</button>
                      <span id="ai-model-status" class="form-status"></span>
                    </div>
                  </form>
                </div>

                <hr class="admin-ai-divider" />

                <!-- Built-in Pricing Reference -->
                <div class="ai-pricing-reference">
                  <h4>Built-in Pricing Reference</h4>
                  <p class="admin-hint">Default pricing used when no custom configuration exists.</p>
                  <table class="ai-usage-table" id="ai-pricing-table">
                    <thead>
                      <tr>
                        <th>Model</th>
                        <th>Input $/1M</th>
                        <th>Output $/1M</th>
                      </tr>
                    </thead>
                    <tbody id="ai-pricing-body">
                      <tr><td colspan="3" class="loading">Loading...</td></tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </section>

            <!-- API Activity Panel -->
            <section id="admin-panel-ai-activity" class="admin-panel" data-admin-tab="ai-activity">
              <div class="admin-ai-activity">
                <h3>API Activity Log</h3>
                <p class="admin-hint">Historical log of all AI API calls. Similar to OpenRouter's activity page.</p>

                <!-- Filters -->
                <div class="ai-activity-filters">
                  <label class="field">
                    <span>Provider</span>
                    <select id="ai-activity-provider">
                      <option value="">All Providers</option>
                      <option value="openrouter">OpenRouter</option>
                      <option value="openai">OpenAI</option>
                      <option value="anthropic">Anthropic</option>
                      <option value="azure_openai">Azure OpenAI</option>
                      <option value="gemini">Google Gemini</option>
                    </select>
                  </label>
                  <label class="field">
                    <span>Model</span>
                    <input id="ai-activity-model" type="text" placeholder="Filter by model..." />
                  </label>
                  <label class="field">
                    <span>Start Date</span>
                    <input id="ai-activity-start-date" type="date" />
                  </label>
                  <label class="field">
                    <span>End Date</span>
                    <input id="ai-activity-end-date" type="date" />
                  </label>
                  <button id="ai-activity-filter" class="btn">Filter</button>
                  <button id="ai-activity-reset" class="btn ghost">Reset</button>
                </div>

                <!-- Activity Actions -->
                <div class="ai-activity-actions">
                  <button id="ai-activity-refresh" class="btn ghost">‚Üª Refresh</button>
                  <button id="ai-activity-export" class="btn">üì• Export CSV</button>
                  <span id="ai-activity-status" class="form-status"></span>
                </div>

                <!-- Activity Table -->
                <div class="ai-activity-table-container">
                  <table class="ai-activity-table" id="ai-activity-table">
                    <thead>
                      <tr>
                        <th>Timestamp</th>
                        <th>Provider/Model</th>
                        <th>Tokens</th>
                        <th>Cost</th>
                        <th>Speed</th>
                        <th>Finish</th>
                        <th>Session</th>
                      </tr>
                    </thead>
                    <tbody id="ai-activity-body">
                      <tr><td colspan="7" class="loading">Loading...</td></tr>
                    </tbody>
                  </table>
                </div>

                <!-- Pagination -->
                <div class="ai-activity-pagination">
                  <span id="ai-activity-showing">Showing 0-0 of 0</span>
                  <div class="pagination-controls">
                    <button id="ai-activity-prev" class="btn ghost" disabled>‚Üê Previous</button>
                    <button id="ai-activity-next" class="btn ghost" disabled>Next ‚Üí</button>
                  </div>
                </div>
              </div>
            </section>
          </div>
        </div>
      </section>

      <!-- NetBox Search Page -->
      <section class="page" id="page-netbox" hidden>
        <div class="panel">
          <h2>NetBox Search</h2>
          <div class="toolbar" style="margin: 8px 0 12px">
            <label class="field grow">
              <span>Search</span>
              <input id="nb-q" type="text" placeholder="Full‚Äëtext query" />
            </label>
            <button id="nb-search" class="btn">Search</button>
            <div class="spacer"></div>
            <label class="field">
              <span>Max</span>
              <select id="nb-max">
                <option value="0">All</option>
                <option value="25">25</option>
                <option value="50" selected>50</option>
                <option value="100">100</option>
                <option value="200">200</option>
              </select>
            </label>
            <button id="nb-reset" class="btn ghost">Reset</button>
          </div>
          <div id="nb-results" class="feed empty">Not searched yet.</div>
        </div>
      </section>

      <!-- vCenter Page -->
      <section class="page" id="page-vcenter" hidden>
        <div class="panel panel-vcenter">
          <div class="vcenter-header">
            <div class="vcenter-title">
              <h2>vCenter Inventory</h2>
              <span id="vcenter-status" class="form-status"></span>
            </div>
            <div class="vcenter-actions">
              <label class="field vcenter-search-field">
                <span>Search</span>
                <input id="vcenter-search" type="text" placeholder="Filter by name, host, IP‚Ä¶" />
              </label>
              <button id="vcenter-refresh" class="btn" type="button">Refresh</button>
            </div>
          </div>
          <nav class="tabs vcenter-tabs" id="vcenter-tabs" aria-label="vCenter instances"></nav>
          <div class="vcenter-body">
            <div id="vcenter-loading" class="panel-state" hidden>Loading inventory‚Ä¶</div>
            <div id="vcenter-error" class="panel-state error" hidden></div>
            <div id="vcenter-empty" class="panel-state" hidden>No vCenters configured yet.</div>
            <div id="vcenter-table-wrapper" class="vcenter-table-wrapper" hidden>
              <table class="vcenter-table">
                <thead id="vcenter-thead"></thead>
                <tbody id="vcenter-tbody"></tbody>
              </table>
            </div>
          </div>
        </div>
      </section>

      <!-- Foreman Page -->
      <section class="page" id="page-foreman" hidden>
        <div class="panel panel-foreman">
          <div class="foreman-header">
            <div class="foreman-title">
              <h2>Foreman Hosts</h2>
              <span id="foreman-status" class="form-status"></span>
            </div>
            <div class="foreman-actions">
              <label class="field foreman-search-field">
                <span>Search</span>
                <input id="foreman-search" type="text" placeholder="Filter by name, OS, environment‚Ä¶" />
              </label>
              <button id="foreman-refresh" class="btn" type="button">Refresh</button>
            </div>
          </div>
          <nav class="tabs foreman-tabs" id="foreman-tabs" aria-label="Foreman instances"></nav>
          <div class="foreman-body">
            <div id="foreman-loading" class="panel-state" hidden>Loading hosts‚Ä¶</div>
            <div id="foreman-error" class="panel-state error" hidden></div>
            <div id="foreman-empty" class="panel-state" hidden>No Foreman instances configured yet.</div>
            <div id="foreman-table-wrapper" class="foreman-table-wrapper" hidden>
              <table class="foreman-table">
                <thead id="foreman-thead"></thead>
                <tbody id="foreman-tbody"></tbody>
              </table>
            </div>
          </div>
        </div>
      </section>

      <!-- Puppet Page -->
      <section class="page" id="page-puppet" hidden>
        <div class="panel panel-puppet">
          <div class="puppet-header">
            <div class="puppet-title">
              <h2>Puppet Users &amp; Groups</h2>
              <span id="puppet-status" class="form-status"></span>
            </div>
            <div class="puppet-actions">
              <label class="field puppet-search-field">
                <span>Search</span>
                <input id="puppet-search" type="text" placeholder="Filter by user, group, email‚Ä¶" />
              </label>
              <button id="puppet-refresh" class="btn" type="button">Refresh</button>
              <button id="puppet-export" class="btn" type="button" title="Export to Excel">Export</button>
            </div>
          </div>
          <nav class="tabs puppet-tabs" id="puppet-tabs" aria-label="Puppet repositories"></nav>
          <nav class="tabs puppet-view-tabs" id="puppet-view-tabs" aria-label="Views">
            <button class="tab active" data-puppet-view="users">Users</button>
            <button class="tab" data-puppet-view="groups">Groups</button>
            <button class="tab" data-puppet-view="matrix">Access Matrix</button>
          </nav>
          <div class="puppet-body">
            <div id="puppet-loading" class="panel-state" hidden>Loading‚Ä¶</div>
            <div id="puppet-error" class="panel-state error" hidden></div>
            <div id="puppet-empty" class="panel-state" hidden>No Puppet configurations found. Add one in Admin settings.</div>

            <!-- Users View -->
            <div id="puppet-users-view" class="puppet-view">
              <div id="puppet-users-table-wrapper" class="puppet-table-wrapper" hidden>
                <table class="puppet-table">
                  <thead id="puppet-users-thead">
                    <tr>
                      <th>Username</th>
                      <th>UID</th>
                      <th>Email</th>
                      <th>Status</th>
                      <th>Sudo</th>
                      <th>Groups</th>
                      <th>Auth</th>
                    </tr>
                  </thead>
                  <tbody id="puppet-users-tbody"></tbody>
                </table>
              </div>
            </div>

            <!-- Groups View -->
            <div id="puppet-groups-view" class="puppet-view" hidden>
              <div id="puppet-groups-table-wrapper" class="puppet-table-wrapper" hidden>
                <table class="puppet-table">
                  <thead id="puppet-groups-thead">
                    <tr>
                      <th>Group</th>
                      <th>GID</th>
                      <th>Members</th>
                      <th>Sudo Members</th>
                    </tr>
                  </thead>
                  <tbody id="puppet-groups-tbody"></tbody>
                </table>
              </div>
            </div>

            <!-- Matrix View -->
            <div id="puppet-matrix-view" class="puppet-view" hidden>
              <div id="puppet-matrix-wrapper" class="puppet-matrix-wrapper" hidden>
                <div id="puppet-matrix-content" class="puppet-matrix-content"></div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Tasks Page -->
      <section class="page" id="page-tasks" hidden>
        <div class="panel panel-tasks">
          <div class="tasks-header">
            <h2>Tasks</h2>
            <div class="tasks-actions">
              <button id="tasks-update-all" class="btn" type="button">Update all</button>
              <button id="tasks-refresh" class="btn ghost" type="button">Reload</button>
              <div class="tasks-layout" role="group" aria-label="Layout">
                <button type="button" class="tasks-layout-btn active" data-tasks-layout="cards">Cards</button>
                <button type="button" class="tasks-layout-btn" data-tasks-layout="rows">Rows</button>
              </div>
            </div>
          </div>
          <div id="tasks-status" class="tasks-status">Loading‚Ä¶</div>
          <div id="tasks-list" class="tasks-list"></div>
        </div>
      </section>

      <!-- Tickets Page -->
      <section class="page" id="page-drafts" hidden>
        <div class="panel panel-drafts">
          <div class="drafts-header">
            <h2>Tickets</h2>
            <p class="drafts-lead">Ticket proposals staged for review before pushing to Jira.</p>
            <div class="drafts-actions">
              <button id="drafts-new" class="btn" type="button">New Ticket</button>
              <button id="drafts-refresh" class="btn ghost" type="button">Refresh</button>
            </div>
          </div>
          <div id="drafts-counts" class="drafts-counts">
            <span class="count-item proposed"><span class="count-value">0</span> Proposed</span>
            <span class="count-item approved"><span class="count-value">0</span> Approved</span>
            <span class="count-item pushed"><span class="count-value">0</span> Pushed</span>
            <span class="count-item rejected"><span class="count-value">0</span> Rejected</span>
          </div>
          <div class="drafts-toolbar">
            <label class="field">
              <span>Status</span>
              <select id="drafts-filter-status">
                <option value="">All</option>
                <option value="proposed">Proposed</option>
                <option value="approved">Approved</option>
                <option value="pushed">Pushed</option>
                <option value="rejected">Rejected</option>
              </select>
            </label>
            <label class="field grow">
              <span>Search</span>
              <input id="drafts-search" type="text" placeholder="Search by title or description" />
            </label>
          </div>
          <div id="drafts-list" class="drafts-list">
            <div class="drafts-empty">Loading tickets...</div>
          </div>
        </div>
        <!-- Ticket Detail Modal -->
        <div id="drafts-modal" class="drafts-modal" hidden>
          <div class="drafts-modal-backdrop" data-close-modal></div>
          <div class="drafts-modal-content">
            <div class="drafts-modal-header">
              <h3 id="drafts-modal-title">Ticket</h3>
              <button id="drafts-modal-close" class="btn ghost" type="button">Close</button>
            </div>
            <div class="drafts-modal-body">
              <form id="drafts-form" class="drafts-form">
                <input type="hidden" id="drafts-form-id" />
                <label class="field">
                  <span>Title</span>
                  <input type="text" id="drafts-form-title" required />
                </label>
                <label class="field">
                  <span>Description</span>
                  <textarea id="drafts-form-description" rows="4"></textarea>
                </label>
                <div class="drafts-form-row">
                  <label class="field">
                    <span>Priority</span>
                    <select id="drafts-form-priority">
                      <option value="low">Low</option>
                      <option value="medium" selected>Medium</option>
                      <option value="high">High</option>
                      <option value="critical">Critical</option>
                    </select>
                  </label>
                  <label class="field">
                    <span>Labels (comma-separated)</span>
                    <input type="text" id="drafts-form-labels" placeholder="bug, enhancement" />
                  </label>
                </div>
                <label class="field">
                  <span>Link to Jira Issue</span>
                  <input type="text" id="drafts-form-jira-key" placeholder="INFRA-1234" />
                </label>
                <div id="drafts-form-ai-proposal" class="drafts-ai-proposal" hidden>
                  <h4>AI Proposal</h4>
                  <pre id="drafts-form-ai-content"></pre>
                </div>
              </form>
            </div>
            <div class="drafts-modal-footer">
              <div class="drafts-modal-actions-left" id="drafts-modal-status-actions">
                <button type="button" id="drafts-btn-approve" class="btn success">Approve</button>
                <button type="button" id="drafts-btn-reject" class="btn danger">Reject</button>
              </div>
              <div class="drafts-modal-actions-right">
                <button type="button" id="drafts-btn-delete" class="btn ghost danger">Delete</button>
                <button type="button" id="drafts-btn-save" class="btn">Save</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Tools Page -->
      <section class="page" id="page-tools" hidden>
        <div class="panel panel-tools">
          <div class="tools-header">
            <div class="tools-header-text">
              <h2>Tools</h2>
              <p class="tools-lead">
                Discover which API tools are available to the web app and AI agents. Filter to find the right integration and run a sample
                request to inspect the response.
              </p>
            </div>
            <div class="tools-actions">
              <label class="field grow">
                <span>Search</span>
                <input id="tools-search" type="text" placeholder="Filter by name, tag or description" />
              </label>
              <button id="tools-refresh" class="btn ghost" type="button">Refresh</button>
            </div>
          </div>
          <div id="tools-tags" class="tools-tags"></div>
          <div id="tools-list" class="tools-grid empty">
            <div class="tools-empty">No tools loaded yet.</div>
          </div>
          <div id="tools-preview" class="tools-preview" hidden>
            <div class="tools-preview-header">
              <h3 id="tools-preview-title">Tool result</h3>
              <button id="tools-preview-collapse" class="btn ghost" type="button">Hide</button>
            </div>
            <pre id="tools-preview-body" class="tools-preview-body"></pre>
          </div>
        </div>
      </section>

      <!-- Zabbix Page -->
      <section class="page" id="page-zabbix" hidden>
        <div class="panel panel-zbx">
          <h2 class="panel-title">Zabbix</h2>
          <div class="toolbar" style="margin: 4px 0 8px">
            <button id="zbx-refresh" class="btn-icon btn-refresh" title="Refresh" aria-label="Refresh">
              <svg viewBox="0 0 24 24" width="18" height="18" aria-hidden="true">
                <!-- Dual-arrow refresh icon (simple) -->
                <path d="M8 6a8 8 0 0 1 11 5" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <path d="M18 4v6h-6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <path d="M16 18a8 8 0 0 1-11-5" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                <path d="M6 20v-6h6" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </button>
            <button id="zbx-ack" class="btn" title="Acknowledge selected problems">Ack</button>
            <button id="zbx-search" class="btn" title="Deep search for the selected item">Deep Search</button>
            <a class="btn" href="https://zabbix.atlas.tech/zabbix.php" target="_blank" rel="noopener">Open Zabbix</a>
            <div class="spacer"></div>
            <label class="field">
              <input id="zbx-unack" type="checkbox" />
              <span>Show unacknowledged only</span>
            </label>
            <label class="field">
              <input id="zbx-systems" type="checkbox" checked />
              <span>Only System (+ subgroups)</span>
            </label>
            <label class="field">
              <span>Auto refresh</span>
              <select id="zbx-refresh-interval">
                <option value="0" selected>Off</option>
                <option value="30000">30s</option>
                <option value="60000">1m</option>
                <option value="120000">2m</option>
                <option value="300000">5m</option>
              </select>
            </label>
            <label class="field">
              <span>Density</span>
              <select id="zbx-density">
                <option value="comfortable" selected>Comfortable</option>
                <option value="compact">Compact</option>
              </select>
            </label>
            <span id="zbx-stats" class="summary"></span>
          </div>
          <div id="zbx-feed" class="feed empty">No Zabbix connection configured yet.</div>
        </div>
      </section>

      <!-- Zabbix Host Details Page -->
      <section class="page" id="page-zhost" hidden>
        <div class="panel">
          <h2 id="zhost-title">Host</h2>
          <div class="toolbar" style="margin: 8px 0 12px">
            <button id="zhost-back" class="btn">‚¨Ö Back to Zabbix</button>
            <a id="zhost-open-zbx" class="btn" href="#" target="_blank" rel="noopener">Open in Zabbix</a>
            <div class="spacer"></div>
            <button id="zhost-ack" class="btn" title="Acknowledge selected problems">Ack</button>
            <span id="zhost-stats" class="summary" style="margin-left: 8px;"></span>
          </div>
          <div id="zhost-info" class="feed empty">Loading‚Ä¶</div>
          <hr />
          <h3>Problems (no filters)</h3>
          <div id="zhost-problems" class="feed empty">Loading‚Ä¶</div>
        </div>
      </section>

      <!-- Jira Page -->
      <section class="page" id="page-jira" hidden>
        <div class="panel">
          <h2>Jira</h2>
          <div class="toolbar" style="margin: 8px 0 12px">
            <label class="field grow">
              <span>Search</span>
              <input id="jira-q" type="text" placeholder="Full‚Äëtext (text ~ ...)" />
            </label>
            <label class="field">
              <span>Project</span>
              <input id="jira-project" type="text" placeholder="e.g. ABC" />
            </label>
            <label class="field">
              <span>Status</span>
              <input id="jira-status" type="text" placeholder="e.g. To Do, In Progress" />
            </label>
            <label class="field">
              <span>Assignee</span>
              <input id="jira-assignee" type="text" placeholder="name/email" />
            </label>
            <label class="field">
              <span>Priority</span>
              <input id="jira-priority" type="text" placeholder="e.g. High" />
            </label>
            <label class="field">
              <span>Type</span>
              <input id="jira-type" type="text" placeholder="e.g. Bug, Task" />
            </label>
            <label class="field">
              <span>Team (Service Desk)</span>
              <input id="jira-team" type="text" value="Systems Infrastructure" placeholder="e.g. Systems Infrastructure" />
            </label>
            <label class="field">
              <span>Updated</span>
              <select id="jira-updated">
                <option value="-7d">7d</option>
                <option value="-14d">14d</option>
                <option value="-30d" selected>30d</option>
                <option value="">All</option>
              </select>
            </label>
            <label class="field">
              <input id="jira-open" type="checkbox" checked />
              <span>Open only</span>
            </label>
            <label class="field">
              <span>Max</span>
              <select id="jira-max">
                <option value="25">25</option>
                <option value="50" selected>50</option>
                <option value="100">100</option>
              </select>
            </label>
            <button id="jira-search" class="btn">Search</button>
            <button id="jira-reset" class="btn ghost">Reset</button>
          </div>
          <div id="jira-results" class="feed empty">Not searched yet or configuration missing.</div>
        </div>
      </section>

      <!-- Confluence Page -->
      <section class="page" id="page-confluence" hidden>
        <div class="panel">
          <h2>Confluence</h2>
          <div class="toolbar" style="margin: 8px 0 12px">
            <label class="field grow">
              <span>Search</span>
              <input id="conf-q" type="text" placeholder="Full‚Äëtext (text ~ ‚Ä¶)" />
            </label>
            <label class="field">
              <span>Space</span>
              <input id="conf-space" type="text" placeholder="e.g. DOCS or exact name" />
            </label>
            <label class="field">
              <span>Type</span>
              <select id="conf-type">
                <option value="page" selected>Page</option>
                <option value="blogpost">Blog post</option>
                <option value="attachment">Attachment</option>
              </select>
            </label>
            <label class="field">
              <span>Labels</span>
              <input id="conf-labels" type="text" placeholder="comma‚Äëseparated" />
            </label>
            <label class="field">
              <span>Updated</span>
              <select id="conf-updated">
                <option value="" selected>All</option>
                <option value="-7d">7d</option>
                <option value="-30d">30d</option>
                <option value="-90d">90d</option>
              </select>
            </label>
            <label class="field">
              <span>Max</span>
              <select id="conf-max">
                <option value="25">25</option>
                <option value="50" selected>50</option>
                <option value="100">100</option>
              </select>
            </label>
            <button id="conf-search" class="btn">Search</button>
            <button id="conf-reset" class="btn ghost">Reset</button>
          </div>
          <div id="conf-results" class="feed empty">Not searched yet.</div>
        </div>
      </section>
        </main>
      </div>
    </div>
    <div id="sidebar-overlay" class="sidebar-overlay" hidden></div>

    <!-- Hide fields panel -->
    <div id="fields-panel" class="fields-panel" hidden>
      <div class="fields-head">
        <div class="fields-title">
          <strong>Hide fields</strong>
          <div class="spacer"></div>
          <button id="fields-collapse" class="btn-icon" title="Close">‚úï</button>
        </div>
        <input id="fields-search" class="fields-search" type="text" placeholder="Find a field" />
      </div>
      <div id="fields-list" class="fields-list" role="listbox" aria-label="Columns"></div>
      <div class="fields-actions">
        <button id="hide-all" class="btn ghost">Hide all</button>
        <button id="show-all" class="btn ghost">Show all</button>
      </div>
    </div>

    <!-- Progress panel -->
    <div id="progress-panel" class="progress-panel" hidden>
      <div class="progress-head">
        <strong>Updating dataset‚Ä¶</strong>
        <div class="spacer"></div>
        <button id="progress-close" class="btn-icon" title="Close">‚úï</button>
      </div>
      <pre id="progress-log" class="progress-log"></pre>
      <!-- Manual resize handles for both corners -->
      <div id="resize-se" class="resize-handle se" title="Resize"></div>
      <div id="resize-sw" class="resize-handle sw" title="Resize"></div>
    </div>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="app.js?v=9"></script>
  </body>
  </html>
