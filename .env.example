# ───────────────────────────────
# General
# ───────────────────────────────
LOG_LEVEL=INFO
ATLAS_LOG_DIR=logs
ATLAS_LOG_LEVEL=INFO
ATLAS_LOG_FILE=logs/atlas.log
ATLAS_LOG_MAX_BYTES=5242880 # 5MB
ATLAS_LOG_BACKUP_COUNT=5
UI_THEME_DEFAULT=silver-dark
# Encryption key for database-backed secrets (Fernet, base64-encoded 32 bytes)
ATLAS_SECRET_KEY=

# ───────────────────────────────
# Module System (Optional)
# ───────────────────────────────
# Control which integration modules are enabled
# By default, all modules are enabled unless explicitly disabled
# You can control modules in three ways (in priority order):
#   1. Database configuration (via web UI /admin/modules)
#   2. Per-module environment variable (ATLAS_MODULE_<NAME>_ENABLED)
#   3. Global comma-separated list (ATLAS_MODULES_ENABLED)
#
# Example: Enable only specific modules
# ATLAS_MODULES_ENABLED=netbox,vcenter
#
# Example: Disable specific modules
# ATLAS_MODULE_COMMVAULT_ENABLED=0
# ATLAS_MODULE_ZABBIX_ENABLED=0

# ───────────────────────────────
# HTTPS (optional)
# Run API server with TLS if both are set
# ATLAS_SSL_CERTFILE=certs/localhost.pem
# ATLAS_SSL_KEYFILE=certs/localhost-key.pem
# If your key is encrypted:
# ATLAS_SSL_KEY_PASSWORD=

# ───────────────────────────────
# Authentication (optional)
# API: Bearer token for protected endpoints
# ATLAS_API_TOKEN=choose-a-strong-token
# UI: /app login (session-based)
# ATLAS_UI_PASSWORD=choose-a-strong-password
# UI session secret (long random string). If omitted, generated at start.
# ATLAS_UI_SECRET=change-me-long-random-string
# Bootstrap admin (when DB empty)
# ATLAS_DEFAULT_ADMIN_USERNAME=admin
# ATLAS_DEFAULT_ADMIN_PASSWORD=choose-a-strong-password

# ───────────────────────────────
# MongoDB Configuration
# ───────────────────────────────
# MongoDB replaces SQLite and JSON caches for better concurrency
# Run with: docker compose up -d mongodb

# MongoDB connection URI
MONGODB_URI=mongodb://localhost:27017

# Database names
MONGODB_DATABASE=atlas
MONGODB_CACHE_DATABASE=atlas_cache

# Connection pool settings (optional)
# MONGODB_MAX_POOL_SIZE=50
# MONGODB_MIN_POOL_SIZE=10
# MONGODB_SERVER_SELECTION_TIMEOUT_MS=5000

# Storage Backend Selection (for gradual rollout/rollback)
# Options: mongodb (default), sqlite
ATLAS_STORAGE_BACKEND=mongodb

# Cache Backend Selection
# Options: mongodb (default), json
ATLAS_CACHE_BACKEND=mongodb

# ───────────────────────────────
# NetBox
# ───────────────────────────────
NETBOX_URL=https://netbox.example.com
NETBOX_TOKEN=your_api_token_here
# Extra (optional)
NETBOX_DEBUG=0
NETBOX_EXTRA_HEADERS=
NETBOX_DATA_DIR=data
NETBOX_XLSX_ORDER_FILE=

# ───────────────────────────────
# Atlassian / Confluence
# ───────────────────────────────
# Generate token: https://id.atlassian.com/manage-profile/security/api-tokens
ATLASSIAN_BASE_URL=https://your-domain.atlassian.net
ATLASSIAN_EMAIL=your_email@company.com
ATLASSIAN_API_TOKEN=your_api_token_here

# Confluence publishing
# Page receiving the CMDB Excel
CONFLUENCE_CMDB_PAGE_ID=
# Optional overrides
CONFLUENCE_DEVICES_PAGE_ID=
CONFLUENCE_VMS_PAGE_ID=
# Optional macros (Table Filter & Charts app required)
# CONFLUENCE_ENABLE_TABLE_FILTER=1
# CONFLUENCE_ENABLE_TABLE_SORT=1

# ───────────────────────────────
# Monitoring (Zabbix)
# ───────────────────────────────
ZABBIX_API_URL=https://zabbix.example.com/api_jsonrpc.php
# Optional alternates/links
ZABBIX_HOST=https://zabbix.example.com
ZABBIX_WEB_URL=https://zabbix.example.com
ZABBIX_API_TOKEN=
ZABBIX_SEVERITIES=2,3,4
ZABBIX_GROUP_ID=
ZABBIX_EXCLUDE_GROUP_PATTERNS=Autoconfig%

# ───────────────────────────────
# Backup Storage
# ───────────────────────────────
# Backup type: sftp, scp, or local
BACKUP_ENABLE=1
BACKUP_TYPE=local

# SFTP/SCP Configuration (when BACKUP_TYPE=sftp or scp)
BACKUP_HOST=backup.example.com
BACKUP_PORT=22
BACKUP_USERNAME=backup_user
BACKUP_PASSWORD=your_password_here
# Alternative: use private key instead of password
# BACKUP_PRIVATE_KEY_PATH=~/.ssh/id_rsa
BACKUP_REMOTE_PATH=/backups/infrastructure_atlas

# Local Backup Configuration (when BACKUP_TYPE=local)
BACKUP_LOCAL_PATH=backups

# Optional: Create timestamped subdirectories for each backup
BACKUP_CREATE_TIMESTAMPED_DIRS=false
# Optional: Compress backups (future feature)
BACKUP_COMPRESS=false

# ───────────────────────────────
# RAG / Confluence Search
# ───────────────────────────────
# Base URL for Confluence (same as ATLASSIAN_BASE_URL typically)
ATLAS_RAG_CONFLUENCE_BASE_URL=https://your-domain.atlassian.net
ATLAS_RAG_CONFLUENCE_USERNAME=your_email@company.com
ATLAS_RAG_CONFLUENCE_API_TOKEN=your_api_token_here

# Spaces and labels to index
ATLAS_RAG_WATCHED_SPACES=["INFRA", "SE"]
ATLAS_RAG_WATCHED_LABELS=["procedure", "how-to", "runbook"]

# Embedding provider: "gemini" (Google API, fast & free tier) or "local" (Nomic, requires GPU/CPU)
ATLAS_RAG_EMBEDDING_PROVIDER=gemini

# Google API Key for Gemini embeddings (required if provider=gemini)
# Get yours at: https://aistudio.google.com/apikey
GOOGLE_API_KEY=

# Gemini embedding model options:
#   - text-embedding-004: FREE, 768 dimensions, excellent quality
#   - gemini-embedding-001: $0.15/1M tokens, 768 dims, slightly better multilingual
ATLAS_RAG_GEMINI_MODEL=text-embedding-004

# Qdrant settings (vector database)
ATLAS_RAG_QDRANT_HOST=localhost
ATLAS_RAG_QDRANT_PORT=6333
ATLAS_RAG_QDRANT_COLLECTION=confluence_chunks

# ───────────────────────────────
# Bot Integrations
# ───────────────────────────────
# Enable the bots module
# ATLAS_MODULE_BOTS_ENABLED=1

# Telegram Bot (polling mode - no webhooks needed)
# Get token from @BotFather on Telegram
TELEGRAM_BOT_TOKEN=
# Optional: webhook secret for webhook mode
# TELEGRAM_WEBHOOK_SECRET=

# Slack Bot (Socket Mode - no public endpoints needed)
# Create app at https://api.slack.com/apps
# Enable Socket Mode and generate tokens
SLACK_BOT_TOKEN=xoxb-your-bot-token
SLACK_APP_TOKEN=xapp-your-app-level-token
# Optional: signing secret for webhook verification
# SLACK_SIGNING_SECRET=

# Microsoft Teams Bot (future)
# TEAMS_APP_ID=
# TEAMS_APP_PASSWORD=
